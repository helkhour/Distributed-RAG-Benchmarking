=== Evaluating Model: mixedbread-ai/mxbai-embed-large-v1-256 ===
2025-05-06 15:01:52,039 - INFO - Running sequential embedding mode
2025-05-06 15:01:52,041 - INFO - Use pytorch device_name: cuda:0
2025-05-06 15:01:52,041 - INFO - Load pretrained SentenceTransformer: mixedbread-ai/mxbai-embed-large-v1
2025-05-06 15:02:01,870 - INFO - 2 prompts are loaded, with the keys: ['query', 'passage']
2025-05-06 15:02:01,875 - INFO - Loading HotpotQA dataset with split: test
2025-05-06 15:02:03,938 - INFO - Loading PubMedQA dataset with split: test
2025-05-06 15:02:05,447 - INFO - Dataset Loading Duration: 3.57s
2025-05-06 15:02:06,502 - INFO - HotpotQA Test Split: 390 entries, 1557 docs, 0.73 MB
2025-05-06 15:02:06,502 - INFO - PubMedQA Test Split: 2450 entries, 12250 docs, 4.31 MB
2025-05-06 15:02:06,502 - INFO - Combined Dataset: 2840 entries, 13807 docs, 5.04 MB
2025-05-06 15:02:07,618 - INFO - Document Collection Duration: 1.12s
2025-05-06 15:02:07,618 - INFO - Total Documents to Embed: 13807
2025-05-06 15:02:07,619 - INFO - Using sequential embedding mode
2025-05-06 15:06:02,727 - INFO - Sequential Embedding Duration: 235.11s
2025-05-06 15:06:02,727 - INFO - Total Query Preprocessing: 0.00s
2025-05-06 15:06:02,727 - INFO - Total Query Encoding: 231.34s
2025-05-06 15:06:02,731 - INFO - Average Embedding Norm: 8.4607 Â± 0.4581
Embedding Generation - Duration: 235.11s, CPU Time Delta: 235.04s, CPU: 0.00%, Memory: 3224.43 MB
2025-05-06 15:06:03,732 - INFO - Attempting to connect to MongoDB at mongodb://localhost:32768/?directConnection=true (Attempt 1/5)
2025-05-06 15:06:03,737 - INFO - Connected to MongoDB successfully!
2025-05-06 15:06:03,909 - INFO - Database Clearing Duration: 0.17s
2025-05-06 15:06:03,909 - INFO - Inserting documents in batch into MongoDB
2025-05-06 15:06:04,920 - INFO - Batch Document Storage Duration: 1.01s
2025-05-06 15:06:04,920 - INFO - Setting up vector index
2025-05-06 15:06:05,279 - INFO - Existing 'vector_index' dropped.
2025-05-06 15:06:05,294 - INFO - Waiting for vector index to be ready...
2025-05-06 15:06:11,908 - INFO - Vector index is now ready!
2025-05-06 15:06:11,908 - INFO - Document Indexing Duration: 6.99s
Embedding and Storage - Duration: 8.18s, CPU Time Delta: 0.43s, CPU: 0.00%, Memory: 3225.71 MB
After Index Setup - CPU: 0.00%, CPU Time: 5108.08s, Memory: 3225.71 MB
2025-05-06 15:06:13,921 - INFO - Stored 13807 documents in batch, 13807 entries in MongoDB.
Data Load (sequential) - Duration: 252.08s, CPU Time Delta: 237.96s, CPU: 0.00%, Memory: 3223.74 MB
2025-05-06 15:06:14,960 - INFO - 
Running evaluation (30 candidates, sequential)...
2025-05-06 15:06:14,960 - INFO - Starting evaluation with 2840 queries, 4 workers, 30 candidates
2025-05-06 15:08:56,013 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 15:08:56,013 - INFO - Database Size: 48.83 MB (13807 documents)
2025-05-06 15:08:56,013 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 15:08:56,013 - INFO - Average Precision: 92.97% (7921/8520 docs)
2025-05-06 15:08:56,013 - INFO - Average Latency: 0.2232 seconds/query
2025-05-06 15:08:56,013 - INFO - Throughput: 17.64 queries/second (with 4 workers, 30 candidates)
Evaluation (30 candidates, sequential) - Duration: 161.06s, CPU Time Delta: 236.95s, CPU: 0.00%, Memory: 3222.49 MB
2025-05-06 15:08:57,022 - INFO - 
Running evaluation (100 candidates, sequential)...
2025-05-06 15:08:57,022 - INFO - Starting evaluation with 2840 queries, 4 workers, 100 candidates
2025-05-06 15:11:37,513 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 15:11:37,513 - INFO - Database Size: 48.83 MB (13807 documents)
2025-05-06 15:11:37,513 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 15:11:37,513 - INFO - Average Precision: 94.04% (8012/8520 docs)
2025-05-06 15:11:37,513 - INFO - Average Latency: 0.2225 seconds/query
2025-05-06 15:11:37,513 - INFO - Throughput: 17.70 queries/second (with 4 workers, 100 candidates)
Evaluation (100 candidates, sequential) - Duration: 160.50s, CPU Time Delta: 235.90s, CPU: 0.00%, Memory: 3221.59 MB
2025-05-06 15:11:38,522 - INFO - Running batch embedding mode
2025-05-06 15:11:38,524 - INFO - Use pytorch device_name: cuda:0
2025-05-06 15:11:38,524 - INFO - Load pretrained SentenceTransformer: mixedbread-ai/mxbai-embed-large-v1
2025-05-06 15:11:40,317 - INFO - 2 prompts are loaded, with the keys: ['query', 'passage']
2025-05-06 15:11:40,322 - INFO - Loading HotpotQA dataset with split: test
2025-05-06 15:11:42,657 - INFO - Loading PubMedQA dataset with split: test
2025-05-06 15:11:44,321 - INFO - Dataset Loading Duration: 4.00s
2025-05-06 15:11:45,376 - INFO - HotpotQA Test Split: 390 entries, 1557 docs, 0.73 MB
2025-05-06 15:11:45,376 - INFO - PubMedQA Test Split: 2450 entries, 12250 docs, 4.31 MB
2025-05-06 15:11:45,376 - INFO - Combined Dataset: 2840 entries, 13807 docs, 5.04 MB
2025-05-06 15:11:46,511 - INFO - Document Collection Duration: 1.13s
2025-05-06 15:11:46,511 - INFO - Total Documents to Embed: 13807
2025-05-06 15:11:46,511 - INFO - Using batch embedding mode
2025-05-06 15:13:46,559 - INFO - Batch Embedding Duration: 120.05s
2025-05-06 15:13:46,559 - INFO - Total Query Preprocessing: 0.00s
2025-05-06 15:13:46,559 - INFO - Total Query Encoding: 34.25s
2025-05-06 15:13:46,561 - INFO - Average Embedding Norm: 8.4607 Â± 0.4581
Embedding Generation - Duration: 120.05s, CPU Time Delta: 123.87s, CPU: 0.00%, Memory: 4015.18 MB
2025-05-06 15:13:47,562 - INFO - Attempting to connect to MongoDB at mongodb://localhost:32768/?directConnection=true (Attempt 1/5)
2025-05-06 15:13:47,566 - INFO - Connected to MongoDB successfully!
2025-05-06 15:13:47,677 - INFO - Database Clearing Duration: 0.11s
2025-05-06 15:13:47,677 - INFO - Inserting documents in batch into MongoDB
2025-05-06 15:13:48,527 - INFO - Batch Document Storage Duration: 0.85s
2025-05-06 15:13:48,527 - INFO - Setting up vector index
2025-05-06 15:13:49,201 - INFO - Existing 'vector_index' dropped.
2025-05-06 15:13:49,224 - INFO - Waiting for vector index to be ready...
2025-05-06 15:13:53,311 - INFO - Vector index is now ready!
2025-05-06 15:13:53,311 - INFO - Document Indexing Duration: 4.78s
Embedding and Storage - Duration: 5.75s, CPU Time Delta: 0.51s, CPU: 0.00%, Memory: 4018.28 MB
After Index Setup - CPU: 0.00%, CPU Time: 5708.66s, Memory: 4018.28 MB
2025-05-06 15:13:55,322 - INFO - Stored 13807 documents in batch, 13807 entries in MongoDB.
Data Load (batch) - Duration: 135.04s, CPU Time Delta: 126.87s, CPU: 0.00%, Memory: 3993.55 MB
2025-05-06 15:13:56,364 - INFO - 
Running evaluation (30 candidates, batch)...
2025-05-06 15:13:56,364 - INFO - Starting evaluation with 2840 queries, 4 workers, 30 candidates
Batches: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:01<00:00,  1.41s/it]
Batches: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:01<00:00,  1.41s/it]
Batches: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:01<00:00,  1.32s/it][A
Batches: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:01<00:00,  1.32s/it]
Batches: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:01<00:00,  1.26s/it][A[A
Batches: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:01<00:00,  1.26s/it]
Batches: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:01<00:00,  1.22s/it][A[A[A
Batches: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:01<00:00,  1.22s/it]
2025-05-06 15:16:37,399 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 15:16:37,400 - INFO - Database Size: 48.83 MB (13807 documents)
2025-05-06 15:16:37,400 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 15:16:37,400 - INFO - Average Precision: 92.83% (7909/8520 docs)
2025-05-06 15:16:37,400 - INFO - Average Latency: 0.2232 seconds/query
2025-05-06 15:16:37,400 - INFO - Throughput: 17.64 queries/second (with 4 workers, 30 candidates)
Evaluation (30 candidates, batch) - Duration: 161.04s, CPU Time Delta: 236.80s, CPU: 0.00%, Memory: 3992.83 MB
2025-05-06 15:16:38,409 - INFO - 
Running evaluation (100 candidates, batch)...
2025-05-06 15:16:38,409 - INFO - Starting evaluation with 2840 queries, 4 workers, 100 candidates
Batches: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:01<00:00,  1.29s/it][A[A
Batches: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:01<00:00,  1.29s/it]
Batches: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:01<00:00,  1.36s/it]
Batches: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:01<00:00,  1.36s/it]
Batches: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:01<00:00,  1.34s/it][A
Batches: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:01<00:00,  1.34s/it]
2025-05-06 15:19:18,923 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 15:19:18,923 - INFO - Database Size: 48.83 MB (13807 documents)
2025-05-06 15:19:18,923 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 15:19:18,923 - INFO - Average Precision: 94.23% (8028/8520 docs)
2025-05-06 15:19:18,923 - INFO - Average Latency: 0.2226 seconds/query
2025-05-06 15:19:18,923 - INFO - Throughput: 17.69 queries/second (with 4 workers, 100 candidates)
Evaluation (100 candidates, batch) - Duration: 160.52s, CPU Time Delta: 235.43s, CPU: 0.00%, Memory: 3992.91 MB
2025-05-06 15:19:19,933 - INFO - 
=== Summary for Model: mixedbread-ai/mxbai-embed-large-v1-256 (Sequential Embedding) ===
2025-05-06 15:19:19,934 - INFO - Model Specs:
2025-05-06 15:19:19,934 - INFO -   Parameters: 335,000,000 (~335M)
2025-05-06 15:19:19,934 - INFO -   Embedding Size: 256
2025-05-06 15:19:19,934 - INFO - 
Dataset and Database Statistics:
2025-05-06 15:19:19,934 - INFO - Metric                                   Value               
2025-05-06 15:19:19,934 - INFO - ------------------------------------------------------------
2025-05-06 15:19:19,934 - INFO - HotpotQA Entries                         390                 
2025-05-06 15:19:19,934 - INFO - PubMedQA Entries                         2450                
2025-05-06 15:19:19,934 - INFO - Total Dataset Entries                    2840                
2025-05-06 15:19:19,934 - INFO - HotpotQA Documents                       1557                
2025-05-06 15:19:19,934 - INFO - PubMedQA Documents                       12250               
2025-05-06 15:19:19,934 - INFO - Total Documents                          13807               
2025-05-06 15:19:19,934 - INFO - HotpotQA Size (MB)                       0.73                
2025-05-06 15:19:19,934 - INFO - PubMedQA Size (MB)                       4.31                
2025-05-06 15:19:19,934 - INFO - Total Dataset Size (MB)                  5.04                
2025-05-06 15:19:19,934 - INFO - Documents Stored (Batch)                 13807               
2025-05-06 15:19:19,934 - INFO - Database Entries                         13807               
2025-05-06 15:19:19,934 - INFO - Database Size (MB)                       48.83               
2025-05-06 15:19:19,934 - INFO - Total Queries Evaluated                  2840                
2025-05-06 15:19:19,934 - INFO - Embedding Mode                           sequential          
2025-05-06 15:19:19,934 - INFO - 
Timing Breakdown (Total Time: 2062.94s):
2025-05-06 15:19:19,935 - INFO - Process                                  Time (s)     Proportion (%) 
2025-05-06 15:19:19,935 - INFO - -------------------------------------------------------------------
2025-05-06 15:19:19,935 - INFO - Database Connection                      0.00         0.00           
2025-05-06 15:19:19,935 - INFO - Dataset Loading                          3.57         0.17           
2025-05-06 15:19:19,935 - INFO - Document Collection                      1.12         0.05           
2025-05-06 15:19:19,935 - INFO - Database Clearing                        0.17         0.01           
2025-05-06 15:19:19,935 - INFO - Sequential Embedding                     235.11       11.40          
2025-05-06 15:19:19,935 - INFO - Embedding Generation (Document)          235.11       11.40          
2025-05-06 15:19:19,935 - INFO - Batch Document Storage                   1.01         0.05           
2025-05-06 15:19:19,935 - INFO - Document Indexing                        6.99         0.34           
2025-05-06 15:19:19,935 - INFO - Query Preprocessing (30 candidates)      0.00         0.00           
2025-05-06 15:19:19,935 - INFO - Query Encoding (30 candidates)           621.53       30.13          
2025-05-06 15:19:19,935 - INFO - Vector Similarity Search (30 candidates) 8.65         0.42           
2025-05-06 15:19:19,935 - INFO - Evaluation Overhead (30 candidates)      161.03       7.81           
2025-05-06 15:19:19,935 - INFO - Query Preprocessing (100 candidates)     0.00         0.00           
2025-05-06 15:19:19,935 - INFO - Query Encoding (100 candidates)          617.64       29.94          
2025-05-06 15:19:19,935 - INFO - Vector Similarity Search (100 candidates) 10.52        0.51           
2025-05-06 15:19:19,935 - INFO - Evaluation Overhead (100 candidates)     160.47       7.78           
2025-05-06 15:19:19,935 - INFO - 
Evaluation Metrics (30 candidates):
2025-05-06 15:19:19,935 - INFO -   Latency (s/query): 0.2232
2025-05-06 15:19:19,935 - INFO -   Throughput (q/s): 17.64
2025-05-06 15:19:19,935 - INFO -   Precision (%): 92.97
2025-05-06 15:19:19,935 - INFO - 
Evaluation Metrics (100 candidates):
2025-05-06 15:19:19,936 - INFO -   Latency (s/query): 0.2225
2025-05-06 15:19:19,936 - INFO -   Throughput (q/s): 17.70
2025-05-06 15:19:19,936 - INFO -   Precision (%): 94.04
