2025-05-06 13:50:38,219 - INFO - Starting RAG evaluation...
2025-05-06 13:50:38,219 - INFO - 
=== Evaluating Model: meta-llama/Meta-Llama-3.1-8B ===
2025-05-06 13:50:38,219 - INFO - Running sequential embedding mode
Set pad_token to eos_token: <|eot_id|>
2025-05-06 13:52:10,603 - INFO - We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
2025-05-06 13:55:10,837 - INFO - Loading HotpotQA dataset with split: test
2025-05-06 13:55:13,335 - INFO - Loading PubMedQA dataset with split: test
2025-05-06 13:55:15,066 - INFO - Dataset Loading Duration: 4.23s
2025-05-06 13:55:16,135 - INFO - HotpotQA Test Split: 390 entries, 1557 docs, 0.73 MB
2025-05-06 13:55:16,135 - INFO - PubMedQA Test Split: 2450 entries, 12250 docs, 4.31 MB
2025-05-06 13:55:16,135 - INFO - Combined Dataset: 2840 entries, 13807 docs, 5.04 MB
2025-05-06 13:55:17,270 - INFO - Document Collection Duration: 1.13s
2025-05-06 13:55:17,270 - INFO - Total Documents to Embed: 13807
2025-05-06 13:55:17,270 - INFO - Using sequential embedding mode
2025-05-06 14:16:26,947 - INFO - Sequential Embedding Duration: 1269.68s
2025-05-06 14:16:26,947 - INFO - Total Query Preprocessing: 7.77s
2025-05-06 14:16:26,947 - INFO - Total Query Encoding: 814.52s
2025-05-06 14:16:26,953 - INFO - Average Embedding Norm: 45.9167 ± 3.2064
Embedding Generation - Duration: 1269.68s, CPU Time Delta: 1268.87s, CPU: 0.00%, Memory: 3961.05 MB
2025-05-06 14:16:27,954 - INFO - Attempting to connect to MongoDB at mongodb://localhost:32768/?directConnection=true (Attempt 1/5)
2025-05-06 14:16:27,964 - INFO - Connected to MongoDB successfully!
2025-05-06 14:16:28,190 - INFO - Database Clearing Duration: 0.23s
2025-05-06 14:16:28,190 - INFO - Inserting documents in batch into MongoDB
2025-05-06 14:16:39,444 - INFO - Batch Document Storage Duration: 11.25s
2025-05-06 14:16:39,482 - INFO - Setting up vector index
2025-05-06 14:16:40,121 - INFO - Existing 'vector_index' dropped.
2025-05-06 14:16:40,402 - INFO - Waiting for vector index to be ready...
2025-05-06 14:17:05,853 - INFO - Vector index is now ready!
2025-05-06 14:17:05,853 - INFO - Document Indexing Duration: 26.37s
Embedding and Storage - Duration: 37.90s, CPU Time Delta: 4.58s, CPU: 0.00%, Memory: 4069.54 MB
After Index Setup - CPU: 0.00%, CPU Time: 1323.83s, Memory: 4069.54 MB
2025-05-06 14:17:07,868 - INFO - Stored 13807 documents in batch, 13807 entries in MongoDB.
Data Load (sequential) - Duration: 1317.50s, CPU Time Delta: 1276.46s, CPU: 0.00%, Memory: 2432.91 MB
2025-05-06 14:17:09,336 - INFO - 
Running evaluation (30 candidates, sequential)...
2025-05-06 14:17:09,336 - INFO - Starting evaluation with 2840 queries, 4 workers, 30 candidates
2025-05-06 14:24:43,408 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 14:24:43,408 - INFO - Database Size: 746.92 MB (13807 documents)
2025-05-06 14:24:43,408 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 14:24:43,408 - INFO - Average Precision: 55.67% (4743/8520 docs)
2025-05-06 14:24:43,408 - INFO - Average Latency: 0.6356 seconds/query
2025-05-06 14:24:43,408 - INFO - Throughput: 6.25 queries/second (with 4 workers, 30 candidates)
Evaluation (30 candidates, sequential) - Duration: 454.08s, CPU Time Delta: 734.63s, CPU: 0.00%, Memory: 2428.95 MB
2025-05-06 14:24:44,417 - INFO - 
Running evaluation (100 candidates, sequential)...
2025-05-06 14:24:44,417 - INFO - Starting evaluation with 2840 queries, 4 workers, 100 candidates
2025-05-06 14:31:40,405 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 14:31:40,405 - INFO - Database Size: 746.92 MB (13807 documents)
2025-05-06 14:31:40,405 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 14:31:40,405 - INFO - Average Precision: 56.08% (4778/8520 docs)
2025-05-06 14:31:40,405 - INFO - Average Latency: 0.5817 seconds/query
2025-05-06 14:31:40,405 - INFO - Throughput: 6.83 queries/second (with 4 workers, 100 candidates)
Evaluation (100 candidates, sequential) - Duration: 415.99s, CPU Time Delta: 658.79s, CPU: 0.00%, Memory: 2426.04 MB
2025-05-06 14:31:41,414 - INFO - Running batch embedding mode
Set pad_token to eos_token: <|eot_id|>
2025-05-06 14:31:44,805 - INFO - We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
Loading checkpoint shards:   0%|          | 0/4 [00:00<?, ?it/s]
Loading checkpoint shards:  25%|██▌       | 1/4 [00:31<01:33, 31.22s/it]
Loading checkpoint shards:  50%|█████     | 2/4 [01:03<01:04, 32.02s/it]
Loading checkpoint shards:  75%|███████▌  | 3/4 [01:39<00:33, 33.93s/it]
Loading checkpoint shards: 100%|██████████| 4/4 [01:41<00:00, 21.02s/it]
Loading checkpoint shards: 100%|██████████| 4/4 [01:41<00:00, 25.31s/it]
2025-05-06 14:33:26,378 - INFO - Loading HotpotQA dataset with split: test
2025-05-06 14:33:28,480 - INFO - Loading PubMedQA dataset with split: test
2025-05-06 14:33:30,219 - INFO - Dataset Loading Duration: 3.84s
2025-05-06 14:33:31,370 - INFO - HotpotQA Test Split: 390 entries, 1557 docs, 0.73 MB
2025-05-06 14:33:31,370 - INFO - PubMedQA Test Split: 2450 entries, 12250 docs, 4.31 MB
2025-05-06 14:33:31,370 - INFO - Combined Dataset: 2840 entries, 13807 docs, 5.04 MB
2025-05-06 14:33:32,557 - INFO - Document Collection Duration: 1.19s
2025-05-06 14:33:32,558 - INFO - Total Documents to Embed: 13807
2025-05-06 14:33:32,558 - INFO - Using batch embedding mode
2025-05-06 14:45:42,265 - INFO - Batch Embedding Duration: 729.71s
2025-05-06 14:45:42,266 - INFO - Total Query Preprocessing: 3.98s
2025-05-06 14:45:42,266 - INFO - Total Query Encoding: 368.77s
2025-05-06 14:45:42,269 - INFO - Average Embedding Norm: 45.4771 ± 3.1080
Embedding Generation - Duration: 729.71s, CPU Time Delta: 732.12s, CPU: 0.00%, Memory: 4436.68 MB
2025-05-06 14:45:43,270 - INFO - Attempting to connect to MongoDB at mongodb://localhost:32768/?directConnection=true (Attempt 1/5)
2025-05-06 14:45:43,276 - INFO - Connected to MongoDB successfully!
2025-05-06 14:45:43,472 - INFO - Database Clearing Duration: 0.20s
2025-05-06 14:45:43,472 - INFO - Inserting documents in batch into MongoDB
2025-05-06 14:46:04,641 - INFO - Batch Document Storage Duration: 21.17s
2025-05-06 14:46:04,641 - INFO - Setting up vector index
2025-05-06 14:46:39,773 - INFO - Existing 'vector_index' dropped.
2025-05-06 14:46:39,800 - INFO - Waiting for vector index to be ready...
2025-05-06 14:47:10,283 - INFO - Vector index is now ready!
2025-05-06 14:47:10,283 - INFO - Document Indexing Duration: 65.64s
Embedding and Storage - Duration: 87.01s, CPU Time Delta: 5.44s, CPU: 0.00%, Memory: 4554.59 MB
After Index Setup - CPU: 0.00%, CPU Time: 3470.99s, Memory: 4554.59 MB
2025-05-06 14:47:12,423 - INFO - Stored 13807 documents in batch, 13807 entries in MongoDB.
Data Load (batch) - Duration: 826.54s, CPU Time Delta: 740.72s, CPU: 0.00%, Memory: 2964.23 MB
2025-05-06 14:47:13,919 - INFO - 
Running evaluation (30 candidates, batch)...
2025-05-06 14:47:13,919 - INFO - Starting evaluation with 2840 queries, 4 workers, 30 candidates
2025-05-06 14:54:20,897 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 14:54:20,897 - INFO - Database Size: 746.92 MB (13807 documents)
2025-05-06 14:54:20,897 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 14:54:20,897 - INFO - Average Precision: 56.35% (4801/8520 docs)
2025-05-06 14:54:20,897 - INFO - Average Latency: 0.5973 seconds/query
2025-05-06 14:54:20,897 - INFO - Throughput: 6.65 queries/second (with 4 workers, 30 candidates)
Evaluation (30 candidates, batch) - Duration: 426.99s, CPU Time Delta: 675.69s, CPU: 0.00%, Memory: 2943.78 MB
2025-05-06 14:54:21,907 - INFO - 
Running evaluation (100 candidates, batch)...
2025-05-06 14:54:21,908 - INFO - Starting evaluation with 2840 queries, 4 workers, 100 candidates
2025-05-06 15:01:51,003 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 15:01:51,003 - INFO - Database Size: 746.92 MB (13807 documents)
2025-05-06 15:01:51,003 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 15:01:51,003 - INFO - Average Precision: 56.67% (4828/8520 docs)
2025-05-06 15:01:51,003 - INFO - Average Latency: 0.6286 seconds/query
2025-05-06 15:01:51,003 - INFO - Throughput: 6.32 queries/second (with 4 workers, 100 candidates)
Evaluation (100 candidates, batch) - Duration: 449.10s, CPU Time Delta: 720.64s, CPU: 0.00%, Memory: 2941.83 MB
2025-05-06 15:01:52,035 - INFO - 
=== Summary for Model: meta-llama/Meta-Llama-3.1-8B (Sequential Embedding) ===
2025-05-06 15:01:52,035 - INFO - Model Specs:
2025-05-06 15:01:52,035 - INFO -   Parameters: 8,000,000,000 (~8000M)
2025-05-06 15:01:52,035 - INFO -   Embedding Size: 4096
2025-05-06 15:01:52,035 - INFO - 
Dataset and Database Statistics:
2025-05-06 15:01:52,035 - INFO - Metric                                   Value               
2025-05-06 15:01:52,035 - INFO - ------------------------------------------------------------
2025-05-06 15:01:52,035 - INFO - HotpotQA Entries                         390                 
2025-05-06 15:01:52,035 - INFO - PubMedQA Entries                         2450                
2025-05-06 15:01:52,035 - INFO - Total Dataset Entries                    2840                
2025-05-06 15:01:52,035 - INFO - HotpotQA Documents                       1557                
2025-05-06 15:01:52,035 - INFO - PubMedQA Documents                       12250               
2025-05-06 15:01:52,035 - INFO - Total Documents                          13807               
2025-05-06 15:01:52,035 - INFO - HotpotQA Size (MB)                       0.73                
2025-05-06 15:01:52,036 - INFO - PubMedQA Size (MB)                       4.31                
2025-05-06 15:01:52,036 - INFO - Total Dataset Size (MB)                  5.04                
2025-05-06 15:01:52,036 - INFO - Documents Stored (Batch)                 13807               
2025-05-06 15:01:52,036 - INFO - Database Entries                         13807               
2025-05-06 15:01:52,036 - INFO - Database Size (MB)                       746.92              
2025-05-06 15:01:52,036 - INFO - Total Queries Evaluated                  2840                
2025-05-06 15:01:52,036 - INFO - Embedding Mode                           sequential          
2025-05-06 15:01:52,036 - INFO - 
Timing Breakdown (Total Time: 6880.99s):
2025-05-06 15:01:52,036 - INFO - Process                                  Time (s)     Proportion (%) 
2025-05-06 15:01:52,036 - INFO - -------------------------------------------------------------------
2025-05-06 15:01:52,036 - INFO - Database Connection                      0.01         0.00           
2025-05-06 15:01:52,036 - INFO - Dataset Loading                          4.23         0.06           
2025-05-06 15:01:52,036 - INFO - Document Collection                      1.13         0.02           
2025-05-06 15:01:52,036 - INFO - Database Clearing                        0.23         0.00           
2025-05-06 15:01:52,036 - INFO - Sequential Embedding                     1269.68      18.45          
2025-05-06 15:01:52,036 - INFO - Embedding Generation (Document)          1269.68      18.45          
2025-05-06 15:01:52,036 - INFO - Batch Document Storage                   11.25        0.16           
2025-05-06 15:01:52,036 - INFO - Document Indexing                        26.37        0.38           
2025-05-06 15:01:52,036 - INFO - Query Preprocessing (30 candidates)      7.10         0.10           
2025-05-06 15:01:52,036 - INFO - Query Encoding (30 candidates)           1724.97      25.07          
2025-05-06 15:01:52,036 - INFO - Vector Similarity Search (30 candidates) 57.89        0.84           
2025-05-06 15:01:52,036 - INFO - Evaluation Overhead (30 candidates)      454.05       6.60           
2025-05-06 15:01:52,037 - INFO - Query Preprocessing (100 candidates)     5.00         0.07           
2025-05-06 15:01:52,037 - INFO - Query Encoding (100 candidates)          1540.18      22.38          
2025-05-06 15:01:52,037 - INFO - Vector Similarity Search (100 candidates) 93.25        1.36           
2025-05-06 15:01:52,037 - INFO - Evaluation Overhead (100 candidates)     415.96       6.05           
2025-05-06 15:01:52,037 - INFO - 
Evaluation Metrics (30 candidates):
2025-05-06 15:01:52,037 - INFO -   Latency (s/query): 0.6356
2025-05-06 15:01:52,037 - INFO -   Throughput (q/s): 6.25
2025-05-06 15:01:52,037 - INFO -   Precision (%): 55.67
2025-05-06 15:01:52,037 - INFO - 
Evaluation Metrics (100 candidates):
2025-05-06 15:01:52,037 - INFO -   Latency (s/query): 0.5817
2025-05-06 15:01:52,037 - INFO -   Throughput (q/s): 6.83
2025-05-06 15:01:52,037 - INFO -   Precision (%): 56.08
2025-05-06 15:01:52,037 - INFO - 
=== Summary for Model: meta-llama/Meta-Llama-3.1-8B (Batch Embedding) ===
2025-05-06 15:01:52,037 - INFO - Model Specs:
2025-05-06 15:01:52,037 - INFO -   Parameters: 8,000,000,000 (~8000M)
2025-05-06 15:01:52,037 - INFO -   Embedding Size: 4096
2025-05-06 15:01:52,037 - INFO - 
Dataset and Database Statistics:
2025-05-06 15:01:52,037 - INFO - Metric                                   Value               
2025-05-06 15:01:52,037 - INFO - ------------------------------------------------------------
2025-05-06 15:01:52,037 - INFO - HotpotQA Entries                         390                 
2025-05-06 15:01:52,037 - INFO - PubMedQA Entries                         2450                
2025-05-06 15:01:52,037 - INFO - Total Dataset Entries                    2840                
2025-05-06 15:01:52,037 - INFO - HotpotQA Documents                       1557                
2025-05-06 15:01:52,037 - INFO - PubMedQA Documents                       12250               
2025-05-06 15:01:52,038 - INFO - Total Documents                          13807               
2025-05-06 15:01:52,038 - INFO - HotpotQA Size (MB)                       0.73                
2025-05-06 15:01:52,038 - INFO - PubMedQA Size (MB)                       4.31                
2025-05-06 15:01:52,038 - INFO - Total Dataset Size (MB)                  5.04                
2025-05-06 15:01:52,038 - INFO - Documents Stored (Batch)                 13807               
2025-05-06 15:01:52,038 - INFO - Database Entries                         13807               
2025-05-06 15:01:52,038 - INFO - Database Size (MB)                       746.92              
2025-05-06 15:01:52,038 - INFO - Total Queries Evaluated                  2840                
2025-05-06 15:01:52,038 - INFO - Embedding Mode                           batch               
2025-05-06 15:01:52,038 - INFO - 
Timing Breakdown (Total Time: 5880.40s):
2025-05-06 15:01:52,038 - INFO - Process                                  Time (s)     Proportion (%) 
2025-05-06 15:01:52,038 - INFO - -------------------------------------------------------------------
2025-05-06 15:01:52,038 - INFO - Database Connection                      0.01         0.00           
2025-05-06 15:01:52,038 - INFO - Dataset Loading                          3.84         0.07           
2025-05-06 15:01:52,038 - INFO - Document Collection                      1.19         0.02           
2025-05-06 15:01:52,038 - INFO - Database Clearing                        0.20         0.00           
2025-05-06 15:01:52,038 - INFO - Batch Embedding                          729.71       12.41          
2025-05-06 15:01:52,038 - INFO - Embedding Generation (Document)          729.71       12.41          
2025-05-06 15:01:52,038 - INFO - Batch Document Storage                   21.17        0.36           
2025-05-06 15:01:52,038 - INFO - Document Indexing                        65.64        1.12           
2025-05-06 15:01:52,038 - INFO - Query Preprocessing (30 candidates)      5.57         0.09           
2025-05-06 15:01:52,038 - INFO - Query Encoding (30 candidates)           1619.29      27.54          
2025-05-06 15:01:52,038 - INFO - Vector Similarity Search (30 candidates) 57.48        0.98           
2025-05-06 15:01:52,038 - INFO - Evaluation Overhead (30 candidates)      426.95       7.26           
2025-05-06 15:01:52,039 - INFO - Query Preprocessing (100 candidates)     5.76         0.10           
2025-05-06 15:01:52,039 - INFO - Query Encoding (100 candidates)          1674.01      28.47          
2025-05-06 15:01:52,039 - INFO - Vector Similarity Search (100 candidates) 90.80        1.54           
2025-05-06 15:01:52,039 - INFO - Evaluation Overhead (100 candidates)     449.07       7.64           
2025-05-06 15:01:52,039 - INFO - 
Evaluation Metrics (30 candidates):
2025-05-06 15:01:52,039 - INFO -   Latency (s/query): 0.5973
2025-05-06 15:01:52,039 - INFO -   Throughput (q/s): 6.65
2025-05-06 15:01:52,039 - INFO -   Precision (%): 56.35
2025-05-06 15:01:52,039 - INFO - 
Evaluation Metrics (100 candidates):
2025-05-06 15:01:52,039 - INFO -   Latency (s/query): 0.6286
2025-05-06 15:01:52,039 - INFO -   Throughput (q/s): 6.32
2025-05-06 15:01:52,039 - INFO -   Precision (%): 56.67
2025-05-06 15:01:52,039 - INFO - 
=== Evaluating Model: mixedbread-ai/mxbai-embed-large-v1-256 ===
2025-05-06 15:01:52,039 - INFO - Running sequential embedding mode
2025-05-06 15:01:52,041 - INFO - Use pytorch device_name: cuda:0
2025-05-06 15:01:52,041 - INFO - Load pretrained SentenceTransformer: mixedbread-ai/mxbai-embed-large-v1
2025-05-06 15:02:01,870 - INFO - 2 prompts are loaded, with the keys: ['query', 'passage']
2025-05-06 15:02:01,875 - INFO - Loading HotpotQA dataset with split: test
2025-05-06 15:02:03,938 - INFO - Loading PubMedQA dataset with split: test
2025-05-06 15:02:05,447 - INFO - Dataset Loading Duration: 3.57s
2025-05-06 15:02:06,502 - INFO - HotpotQA Test Split: 390 entries, 1557 docs, 0.73 MB
2025-05-06 15:02:06,502 - INFO - PubMedQA Test Split: 2450 entries, 12250 docs, 4.31 MB
2025-05-06 15:02:06,502 - INFO - Combined Dataset: 2840 entries, 13807 docs, 5.04 MB
2025-05-06 15:02:07,618 - INFO - Document Collection Duration: 1.12s
2025-05-06 15:02:07,618 - INFO - Total Documents to Embed: 13807
2025-05-06 15:02:07,619 - INFO - Using sequential embedding mode
2025-05-06 15:06:02,727 - INFO - Sequential Embedding Duration: 235.11s
2025-05-06 15:06:02,727 - INFO - Total Query Preprocessing: 0.00s
2025-05-06 15:06:02,727 - INFO - Total Query Encoding: 231.34s
2025-05-06 15:06:02,731 - INFO - Average Embedding Norm: 8.4607 ± 0.4581
Embedding Generation - Duration: 235.11s, CPU Time Delta: 235.04s, CPU: 0.00%, Memory: 3224.43 MB
2025-05-06 15:06:03,732 - INFO - Attempting to connect to MongoDB at mongodb://localhost:32768/?directConnection=true (Attempt 1/5)
2025-05-06 15:06:03,737 - INFO - Connected to MongoDB successfully!
2025-05-06 15:06:03,909 - INFO - Database Clearing Duration: 0.17s
2025-05-06 15:06:03,909 - INFO - Inserting documents in batch into MongoDB
2025-05-06 15:06:04,920 - INFO - Batch Document Storage Duration: 1.01s
2025-05-06 15:06:04,920 - INFO - Setting up vector index
2025-05-06 15:06:05,279 - INFO - Existing 'vector_index' dropped.
2025-05-06 15:06:05,294 - INFO - Waiting for vector index to be ready...
2025-05-06 15:06:11,908 - INFO - Vector index is now ready!
2025-05-06 15:06:11,908 - INFO - Document Indexing Duration: 6.99s
Embedding and Storage - Duration: 8.18s, CPU Time Delta: 0.43s, CPU: 0.00%, Memory: 3225.71 MB
After Index Setup - CPU: 0.00%, CPU Time: 5108.08s, Memory: 3225.71 MB
2025-05-06 15:06:13,921 - INFO - Stored 13807 documents in batch, 13807 entries in MongoDB.
Data Load (sequential) - Duration: 252.08s, CPU Time Delta: 237.96s, CPU: 0.00%, Memory: 3223.74 MB
2025-05-06 15:06:14,960 - INFO - 
Running evaluation (30 candidates, sequential)...
2025-05-06 15:06:14,960 - INFO - Starting evaluation with 2840 queries, 4 workers, 30 candidates

2025-05-06 15:08:56,013 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 15:08:56,013 - INFO - Database Size: 48.83 MB (13807 documents)
2025-05-06 15:08:56,013 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 15:08:56,013 - INFO - Average Precision: 92.97% (7921/8520 docs)
2025-05-06 15:08:56,013 - INFO - Average Latency: 0.2232 seconds/query
2025-05-06 15:08:56,013 - INFO - Throughput: 17.64 queries/second (with 4 workers, 30 candidates)
Evaluation (30 candidates, sequential) - Duration: 161.06s, CPU Time Delta: 236.95s, CPU: 0.00%, Memory: 3222.49 MB
2025-05-06 15:08:57,022 - INFO - 
Running evaluation (100 candidates, sequential)...
2025-05-06 15:08:57,022 - INFO - Starting evaluation with 2840 queries, 4 workers, 100 candidates

2025-05-06 15:11:37,513 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 15:11:37,513 - INFO - Database Size: 48.83 MB (13807 documents)
2025-05-06 15:11:37,513 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 15:11:37,513 - INFO - Average Precision: 94.04% (8012/8520 docs)
2025-05-06 15:11:37,513 - INFO - Average Latency: 0.2225 seconds/query
2025-05-06 15:11:37,513 - INFO - Throughput: 17.70 queries/second (with 4 workers, 100 candidates)
Evaluation (100 candidates, sequential) - Duration: 160.50s, CPU Time Delta: 235.90s, CPU: 0.00%, Memory: 3221.59 MB
2025-05-06 15:11:38,522 - INFO - Running batch embedding mode
2025-05-06 15:11:38,524 - INFO - Use pytorch device_name: cuda:0
2025-05-06 15:11:38,524 - INFO - Load pretrained SentenceTransformer: mixedbread-ai/mxbai-embed-large-v1
2025-05-06 15:11:40,317 - INFO - 2 prompts are loaded, with the keys: ['query', 'passage']
2025-05-06 15:11:40,322 - INFO - Loading HotpotQA dataset with split: test
2025-05-06 15:11:42,657 - INFO - Loading PubMedQA dataset with split: test
2025-05-06 15:11:44,321 - INFO - Dataset Loading Duration: 4.00s
2025-05-06 15:11:45,376 - INFO - HotpotQA Test Split: 390 entries, 1557 docs, 0.73 MB
2025-05-06 15:11:45,376 - INFO - PubMedQA Test Split: 2450 entries, 12250 docs, 4.31 MB
2025-05-06 15:11:45,376 - INFO - Combined Dataset: 2840 entries, 13807 docs, 5.04 MB
2025-05-06 15:11:46,511 - INFO - Document Collection Duration: 1.13s
2025-05-06 15:11:46,511 - INFO - Total Documents to Embed: 13807
2025-05-06 15:11:46,511 - INFO - Using batch embedding mode
2025-05-06 15:13:46,559 - INFO - Batch Embedding Duration: 120.05s
2025-05-06 15:13:46,559 - INFO - Total Query Preprocessing: 0.00s
2025-05-06 15:13:46,559 - INFO - Total Query Encoding: 34.25s
2025-05-06 15:13:46,561 - INFO - Average Embedding Norm: 8.4607 ± 0.4581
Embedding Generation - Duration: 120.05s, CPU Time Delta: 123.87s, CPU: 0.00%, Memory: 4015.18 MB
2025-05-06 15:13:47,562 - INFO - Attempting to connect to MongoDB at mongodb://localhost:32768/?directConnection=true (Attempt 1/5)
2025-05-06 15:13:47,566 - INFO - Connected to MongoDB successfully!
2025-05-06 15:13:47,677 - INFO - Database Clearing Duration: 0.11s
2025-05-06 15:13:47,677 - INFO - Inserting documents in batch into MongoDB
2025-05-06 15:13:48,527 - INFO - Batch Document Storage Duration: 0.85s
2025-05-06 15:13:48,527 - INFO - Setting up vector index
2025-05-06 15:13:49,201 - INFO - Existing 'vector_index' dropped.
2025-05-06 15:13:49,224 - INFO - Waiting for vector index to be ready...
2025-05-06 15:13:53,311 - INFO - Vector index is now ready!
2025-05-06 15:13:53,311 - INFO - Document Indexing Duration: 4.78s
Embedding and Storage - Duration: 5.75s, CPU Time Delta: 0.51s, CPU: 0.00%, Memory: 4018.28 MB
After Index Setup - CPU: 0.00%, CPU Time: 5708.66s, Memory: 4018.28 MB
2025-05-06 15:13:55,322 - INFO - Stored 13807 documents in batch, 13807 entries in MongoDB.
Data Load (batch) - Duration: 135.04s, CPU Time Delta: 126.87s, CPU: 0.00%, Memory: 3993.55 MB
2025-05-06 15:13:56,364 - INFO - 
Running evaluation (30 candidates, batch)...
2025-05-06 15:13:56,364 - INFO - Starting evaluation with 2840 queries, 4 workers, 30 candidates
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.41s/it]
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.41s/it]
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.32s/it][A
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.32s/it]
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.26s/it][A[A
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.26s/it]
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.22s/it][A[A[A
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.22s/it]
2025-05-06 15:16:37,399 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 15:16:37,400 - INFO - Database Size: 48.83 MB (13807 documents)
2025-05-06 15:16:37,400 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 15:16:37,400 - INFO - Average Precision: 92.83% (7909/8520 docs)
2025-05-06 15:16:37,400 - INFO - Average Latency: 0.2232 seconds/query
2025-05-06 15:16:37,400 - INFO - Throughput: 17.64 queries/second (with 4 workers, 30 candidates)
Evaluation (30 candidates, batch) - Duration: 161.04s, CPU Time Delta: 236.80s, CPU: 0.00%, Memory: 3992.83 MB
2025-05-06 15:16:38,409 - INFO - 
Running evaluation (100 candidates, batch)...
2025-05-06 15:16:38,409 - INFO - Starting evaluation with 2840 queries, 4 workers, 100 candidates
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.29s/it][A[A
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.29s/it]
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.36s/it]
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.36s/it]
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.34s/it][A
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.34s/it]
2025-05-06 15:19:18,923 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 15:19:18,923 - INFO - Database Size: 48.83 MB (13807 documents)
2025-05-06 15:19:18,923 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 15:19:18,923 - INFO - Average Precision: 94.23% (8028/8520 docs)
2025-05-06 15:19:18,923 - INFO - Average Latency: 0.2226 seconds/query
2025-05-06 15:19:18,923 - INFO - Throughput: 17.69 queries/second (with 4 workers, 100 candidates)
Evaluation (100 candidates, batch) - Duration: 160.52s, CPU Time Delta: 235.43s, CPU: 0.00%, Memory: 3992.91 MB
2025-05-06 15:19:19,933 - INFO - 
=== Summary for Model: mixedbread-ai/mxbai-embed-large-v1-256 (Sequential Embedding) ===
2025-05-06 15:19:19,934 - INFO - Model Specs:
2025-05-06 15:19:19,934 - INFO -   Parameters: 335,000,000 (~335M)
2025-05-06 15:19:19,934 - INFO -   Embedding Size: 256
2025-05-06 15:19:19,934 - INFO - 
Dataset and Database Statistics:
2025-05-06 15:19:19,934 - INFO - Metric                                   Value               
2025-05-06 15:19:19,934 - INFO - ------------------------------------------------------------
2025-05-06 15:19:19,934 - INFO - HotpotQA Entries                         390                 
2025-05-06 15:19:19,934 - INFO - PubMedQA Entries                         2450                
2025-05-06 15:19:19,934 - INFO - Total Dataset Entries                    2840                
2025-05-06 15:19:19,934 - INFO - HotpotQA Documents                       1557                
2025-05-06 15:19:19,934 - INFO - PubMedQA Documents                       12250               
2025-05-06 15:19:19,934 - INFO - Total Documents                          13807               
2025-05-06 15:19:19,934 - INFO - HotpotQA Size (MB)                       0.73                
2025-05-06 15:19:19,934 - INFO - PubMedQA Size (MB)                       4.31                
2025-05-06 15:19:19,934 - INFO - Total Dataset Size (MB)                  5.04                
2025-05-06 15:19:19,934 - INFO - Documents Stored (Batch)                 13807               
2025-05-06 15:19:19,934 - INFO - Database Entries                         13807               
2025-05-06 15:19:19,934 - INFO - Database Size (MB)                       48.83               
2025-05-06 15:19:19,934 - INFO - Total Queries Evaluated                  2840                
2025-05-06 15:19:19,934 - INFO - Embedding Mode                           sequential          
2025-05-06 15:19:19,934 - INFO - 
Timing Breakdown (Total Time: 2062.94s):
2025-05-06 15:19:19,935 - INFO - Process                                  Time (s)     Proportion (%) 
2025-05-06 15:19:19,935 - INFO - -------------------------------------------------------------------
2025-05-06 15:19:19,935 - INFO - Database Connection                      0.00         0.00           
2025-05-06 15:19:19,935 - INFO - Dataset Loading                          3.57         0.17           
2025-05-06 15:19:19,935 - INFO - Document Collection                      1.12         0.05           
2025-05-06 15:19:19,935 - INFO - Database Clearing                        0.17         0.01           
2025-05-06 15:19:19,935 - INFO - Sequential Embedding                     235.11       11.40          
2025-05-06 15:19:19,935 - INFO - Embedding Generation (Document)          235.11       11.40          
2025-05-06 15:19:19,935 - INFO - Batch Document Storage                   1.01         0.05           
2025-05-06 15:19:19,935 - INFO - Document Indexing                        6.99         0.34           
2025-05-06 15:19:19,935 - INFO - Query Preprocessing (30 candidates)      0.00         0.00           
2025-05-06 15:19:19,935 - INFO - Query Encoding (30 candidates)           621.53       30.13          
2025-05-06 15:19:19,935 - INFO - Vector Similarity Search (30 candidates) 8.65         0.42           
2025-05-06 15:19:19,935 - INFO - Evaluation Overhead (30 candidates)      161.03       7.81           
2025-05-06 15:19:19,935 - INFO - Query Preprocessing (100 candidates)     0.00         0.00           
2025-05-06 15:19:19,935 - INFO - Query Encoding (100 candidates)          617.64       29.94          
2025-05-06 15:19:19,935 - INFO - Vector Similarity Search (100 candidates) 10.52        0.51           
2025-05-06 15:19:19,935 - INFO - Evaluation Overhead (100 candidates)     160.47       7.78           
2025-05-06 15:19:19,935 - INFO - 
Evaluation Metrics (30 candidates):
2025-05-06 15:19:19,935 - INFO -   Latency (s/query): 0.2232
2025-05-06 15:19:19,935 - INFO -   Throughput (q/s): 17.64
2025-05-06 15:19:19,935 - INFO -   Precision (%): 92.97
2025-05-06 15:19:19,935 - INFO - 
Evaluation Metrics (100 candidates):
2025-05-06 15:19:19,936 - INFO -   Latency (s/query): 0.2225
2025-05-06 15:19:19,936 - INFO -   Throughput (q/s): 17.70
2025-05-06 15:19:19,936 - INFO -   Precision (%): 94.04
2025-05-06 15:19:19,936 - INFO - 
=== Summary for Model: mixedbread-ai/mxbai-embed-large-v1-256 (Batch Embedding) ===
2025-05-06 15:19:19,936 - INFO - Model Specs:
2025-05-06 15:19:19,936 - INFO -   Parameters: 335,000,000 (~335M)
2025-05-06 15:19:19,936 - INFO -   Embedding Size: 256
2025-05-06 15:19:19,936 - INFO - 
Dataset and Database Statistics:
2025-05-06 15:19:19,936 - INFO - Metric                                   Value               
2025-05-06 15:19:19,936 - INFO - ------------------------------------------------------------
2025-05-06 15:19:19,936 - INFO - HotpotQA Entries                         390                 
2025-05-06 15:19:19,936 - INFO - PubMedQA Entries                         2450                
2025-05-06 15:19:19,936 - INFO - Total Dataset Entries                    2840                
2025-05-06 15:19:19,936 - INFO - HotpotQA Documents                       1557                
2025-05-06 15:19:19,936 - INFO - PubMedQA Documents                       12250               
2025-05-06 15:19:19,936 - INFO - Total Documents                          13807               
2025-05-06 15:19:19,936 - INFO - HotpotQA Size (MB)                       0.73                
2025-05-06 15:19:19,936 - INFO - PubMedQA Size (MB)                       4.31                
2025-05-06 15:19:19,936 - INFO - Total Dataset Size (MB)                  5.04                
2025-05-06 15:19:19,936 - INFO - Documents Stored (Batch)                 13807               
2025-05-06 15:19:19,936 - INFO - Database Entries                         13807               
2025-05-06 15:19:19,936 - INFO - Database Size (MB)                       48.83               
2025-05-06 15:19:19,936 - INFO - Total Queries Evaluated                  2840                
2025-05-06 15:19:19,937 - INFO - Embedding Mode                           batch               
2025-05-06 15:19:19,937 - INFO - 
Timing Breakdown (Total Time: 1831.05s):
2025-05-06 15:19:19,937 - INFO - Process                                  Time (s)     Proportion (%) 
2025-05-06 15:19:19,937 - INFO - -------------------------------------------------------------------
2025-05-06 15:19:19,937 - INFO - Database Connection                      0.00         0.00           
2025-05-06 15:19:19,937 - INFO - Dataset Loading                          4.00         0.22           
2025-05-06 15:19:19,937 - INFO - Document Collection                      1.13         0.06           
2025-05-06 15:19:19,937 - INFO - Database Clearing                        0.11         0.01           
2025-05-06 15:19:19,937 - INFO - Batch Embedding                          120.05       6.56           
2025-05-06 15:19:19,937 - INFO - Embedding Generation (Document)          120.05       6.56           
2025-05-06 15:19:19,937 - INFO - Batch Document Storage                   0.85         0.05           
2025-05-06 15:19:19,937 - INFO - Document Indexing                        4.78         0.26           
2025-05-06 15:19:19,937 - INFO - Query Preprocessing (30 candidates)      0.00         0.00           
2025-05-06 15:19:19,937 - INFO - Query Encoding (30 candidates)           621.99       33.97          
2025-05-06 15:19:19,937 - INFO - Vector Similarity Search (30 candidates) 8.25         0.45           
2025-05-06 15:19:19,937 - INFO - Evaluation Overhead (30 candidates)      161.02       8.79           
2025-05-06 15:19:19,937 - INFO - Query Preprocessing (100 candidates)     0.00         0.00           
2025-05-06 15:19:19,937 - INFO - Query Encoding (100 candidates)          617.78       33.74          
2025-05-06 15:19:19,937 - INFO - Vector Similarity Search (100 candidates) 10.53        0.57           
2025-05-06 15:19:19,937 - INFO - Evaluation Overhead (100 candidates)     160.50       8.77           
2025-05-06 15:19:19,937 - INFO - 
Evaluation Metrics (30 candidates):
2025-05-06 15:19:19,937 - INFO -   Latency (s/query): 0.2232
2025-05-06 15:19:19,937 - INFO -   Throughput (q/s): 17.64
2025-05-06 15:19:19,938 - INFO -   Precision (%): 92.83
2025-05-06 15:19:19,938 - INFO - 
Evaluation Metrics (100 candidates):
2025-05-06 15:19:19,938 - INFO -   Latency (s/query): 0.2226
2025-05-06 15:19:19,938 - INFO -   Throughput (q/s): 17.69
2025-05-06 15:19:19,938 - INFO -   Precision (%): 94.23
2025-05-06 15:19:19,938 - INFO - 
=== Evaluating Model: mixedbread-ai/mxbai-embed-large-v1-512 ===
2025-05-06 15:19:19,938 - INFO - Running sequential embedding mode
2025-05-06 15:19:19,940 - INFO - Use pytorch device_name: cuda:0
2025-05-06 15:19:19,940 - INFO - Load pretrained SentenceTransformer: mixedbread-ai/mxbai-embed-large-v1
2025-05-06 15:19:21,867 - INFO - 2 prompts are loaded, with the keys: ['query', 'passage']
2025-05-06 15:19:21,872 - INFO - Loading HotpotQA dataset with split: test
2025-05-06 15:19:23,635 - INFO - Loading PubMedQA dataset with split: test
2025-05-06 15:19:25,286 - INFO - Dataset Loading Duration: 3.41s
2025-05-06 15:19:26,335 - INFO - HotpotQA Test Split: 390 entries, 1557 docs, 0.73 MB
2025-05-06 15:19:26,335 - INFO - PubMedQA Test Split: 2450 entries, 12250 docs, 4.31 MB
2025-05-06 15:19:26,335 - INFO - Combined Dataset: 2840 entries, 13807 docs, 5.04 MB
2025-05-06 15:19:27,470 - INFO - Document Collection Duration: 1.13s
2025-05-06 15:19:27,470 - INFO - Total Documents to Embed: 13807
2025-05-06 15:19:27,470 - INFO - Using sequential embedding mode
2025-05-06 15:23:22,964 - INFO - Sequential Embedding Duration: 235.49s
2025-05-06 15:23:22,964 - INFO - Total Query Preprocessing: 0.00s
2025-05-06 15:23:22,964 - INFO - Total Query Encoding: 231.75s
2025-05-06 15:23:22,967 - INFO - Average Embedding Norm: 11.9868 ± 0.5701
Embedding Generation - Duration: 235.50s, CPU Time Delta: 235.53s, CPU: 0.00%, Memory: 4378.52 MB
2025-05-06 15:23:23,969 - INFO - Attempting to connect to MongoDB at mongodb://localhost:32768/?directConnection=true (Attempt 1/5)
2025-05-06 15:23:23,974 - INFO - Connected to MongoDB successfully!
2025-05-06 15:23:24,083 - INFO - Database Clearing Duration: 0.11s
2025-05-06 15:23:24,084 - INFO - Inserting documents in batch into MongoDB
2025-05-06 15:23:25,714 - INFO - Batch Document Storage Duration: 1.63s
2025-05-06 15:23:25,714 - INFO - Setting up vector index
2025-05-06 15:23:29,718 - INFO - Existing 'vector_index' dropped.
2025-05-06 15:23:29,741 - INFO - Waiting for vector index to be ready...
2025-05-06 15:23:36,354 - INFO - Vector index is now ready!
2025-05-06 15:23:36,354 - INFO - Document Indexing Duration: 10.64s
Embedding and Storage - Duration: 12.39s, CPU Time Delta: 0.68s, CPU: 0.00%, Memory: 4379.75 MB
After Index Setup - CPU: 1.00%, CPU Time: 6420.37s, Memory: 4379.75 MB
2025-05-06 15:23:38,365 - INFO - Stored 13807 documents in batch, 13807 entries in MongoDB.
Data Load (sequential) - Duration: 256.56s, CPU Time Delta: 238.73s, CPU: 0.00%, Memory: 4268.39 MB
2025-05-06 15:23:39,436 - INFO - 
Running evaluation (30 candidates, sequential)...
2025-05-06 15:23:39,436 - INFO - Starting evaluation with 2840 queries, 4 workers, 30 candidates
2025-05-06 15:26:20,320 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 15:26:20,320 - INFO - Database Size: 92.65 MB (13807 documents)
2025-05-06 15:26:20,320 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 15:26:20,320 - INFO - Average Precision: 93.70% (7983/8520 docs)
2025-05-06 15:26:20,320 - INFO - Average Latency: 0.2230 seconds/query
2025-05-06 15:26:20,320 - INFO - Throughput: 17.65 queries/second (with 4 workers, 30 candidates)
Evaluation (30 candidates, sequential) - Duration: 160.89s, CPU Time Delta: 236.26s, CPU: 0.00%, Memory: 4265.49 MB
2025-05-06 15:26:21,329 - INFO - 
Running evaluation (100 candidates, sequential)...
2025-05-06 15:26:21,330 - INFO - Starting evaluation with 2840 queries, 4 workers, 100 candidates
2025-05-06 15:29:01,670 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 15:29:01,670 - INFO - Database Size: 92.65 MB (13807 documents)
2025-05-06 15:29:01,670 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 15:29:01,670 - INFO - Average Precision: 94.78% (8075/8520 docs)
2025-05-06 15:29:01,670 - INFO - Average Latency: 0.2223 seconds/query
2025-05-06 15:29:01,670 - INFO - Throughput: 17.71 queries/second (with 4 workers, 100 candidates)
Evaluation (100 candidates, sequential) - Duration: 160.35s, CPU Time Delta: 234.73s, CPU: 0.00%, Memory: 4265.53 MB
2025-05-06 15:29:02,679 - INFO - Running batch embedding mode
2025-05-06 15:29:02,681 - INFO - Use pytorch device_name: cuda:0
2025-05-06 15:29:02,681 - INFO - Load pretrained SentenceTransformer: mixedbread-ai/mxbai-embed-large-v1
2025-05-06 15:29:04,610 - INFO - 2 prompts are loaded, with the keys: ['query', 'passage']
2025-05-06 15:29:04,615 - INFO - Loading HotpotQA dataset with split: test
2025-05-06 15:29:06,426 - INFO - Loading PubMedQA dataset with split: test
2025-05-06 15:29:07,915 - INFO - Dataset Loading Duration: 3.30s
2025-05-06 15:29:08,960 - INFO - HotpotQA Test Split: 390 entries, 1557 docs, 0.73 MB
2025-05-06 15:29:08,960 - INFO - PubMedQA Test Split: 2450 entries, 12250 docs, 4.31 MB
2025-05-06 15:29:08,960 - INFO - Combined Dataset: 2840 entries, 13807 docs, 5.04 MB
2025-05-06 15:29:10,078 - INFO - Document Collection Duration: 1.12s
2025-05-06 15:29:10,079 - INFO - Total Documents to Embed: 13807
2025-05-06 15:29:10,079 - INFO - Using batch embedding mode
2025-05-06 15:31:11,226 - INFO - Batch Embedding Duration: 121.15s
2025-05-06 15:31:11,226 - INFO - Total Query Preprocessing: 0.00s
2025-05-06 15:31:11,227 - INFO - Total Query Encoding: 34.80s
2025-05-06 15:31:11,228 - INFO - Average Embedding Norm: 11.9868 ± 0.5701
Embedding Generation - Duration: 121.15s, CPU Time Delta: 124.96s, CPU: 0.00%, Memory: 4226.09 MB
2025-05-06 15:31:12,230 - INFO - Attempting to connect to MongoDB at mongodb://localhost:32768/?directConnection=true (Attempt 1/5)
2025-05-06 15:31:12,233 - INFO - Connected to MongoDB successfully!
2025-05-06 15:31:12,350 - INFO - Database Clearing Duration: 0.12s
2025-05-06 15:31:12,350 - INFO - Inserting documents in batch into MongoDB
2025-05-06 15:31:13,563 - INFO - Batch Document Storage Duration: 1.21s
2025-05-06 15:31:13,563 - INFO - Setting up vector index
2025-05-06 15:31:15,958 - INFO - Existing 'vector_index' dropped.
2025-05-06 15:31:15,982 - INFO - Waiting for vector index to be ready...
2025-05-06 15:31:26,401 - INFO - Vector index is now ready!
2025-05-06 15:31:26,401 - INFO - Document Indexing Duration: 12.84s
Embedding and Storage - Duration: 14.17s, CPU Time Delta: 0.66s, CPU: 1.00%, Memory: 4227.12 MB
After Index Setup - CPU: 0.00%, CPU Time: 7020.16s, Memory: 4227.12 MB
2025-05-06 15:31:28,411 - INFO - Stored 13807 documents in batch, 13807 entries in MongoDB.
Data Load (batch) - Duration: 143.87s, CPU Time Delta: 128.12s, CPU: 0.00%, Memory: 4099.12 MB
2025-05-06 15:31:29,487 - INFO - 
Running evaluation (30 candidates, batch)...
2025-05-06 15:31:29,487 - INFO - Starting evaluation with 2840 queries, 4 workers, 30 candidates
=== Retrieval Performance Summary ===
2025-05-06 15:34:10,211 - INFO - Database Size: 92.65 MB (13807 documents)
2025-05-06 15:34:10,211 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 15:34:10,211 - INFO - Average Precision: 94.13% (8020/8520 docs)
2025-05-06 15:34:10,211 - INFO - Average Latency: 0.2227 seconds/query
2025-05-06 15:34:10,211 - INFO - Throughput: 17.67 queries/second (with 4 workers, 30 candidates)
Evaluation (30 candidates, batch) - Duration: 160.73s, CPU Time Delta: 235.41s, CPU: 0.00%, Memory: 4093.18 MB
2025-05-06 15:34:11,220 - INFO - 
Running evaluation (100 candidates, batch)...
2025-05-06 15:34:11,221 - INFO - Starting evaluation with 2840 queries, 4 workers, 100 candidates
=== Retrieval Performance Summary ===
2025-05-06 15:36:51,189 - INFO - Database Size: 92.65 MB (13807 documents)
2025-05-06 15:36:51,189 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 15:36:51,189 - INFO - Average Precision: 95.11% (8103/8520 docs)
2025-05-06 15:36:51,189 - INFO - Average Latency: 0.2218 seconds/query
2025-05-06 15:36:51,189 - INFO - Throughput: 17.75 queries/second (with 4 workers, 100 candidates)
Evaluation (100 candidates, batch) - Duration: 159.98s, CPU Time Delta: 234.02s, CPU: 0.00%, Memory: 4093.18 MB
2025-05-06 15:36:52,199 - INFO - 
=== Summary for Model: mixedbread-ai/mxbai-embed-large-v1-512 (Sequential Embedding) ===
2025-05-06 15:36:52,199 - INFO - Model Specs:
2025-05-06 15:36:52,199 - INFO -   Parameters: 335,000,000 (~335M)
2025-05-06 15:36:52,199 - INFO -   Embedding Size: 512
2025-05-06 15:36:52,199 - INFO - 
Dataset and Database Statistics:
2025-05-06 15:36:52,199 - INFO - Metric                                   Value               
2025-05-06 15:36:52,199 - INFO - ------------------------------------------------------------
2025-05-06 15:36:52,199 - INFO - HotpotQA Entries                         390                 
2025-05-06 15:36:52,199 - INFO - PubMedQA Entries                         2450                
2025-05-06 15:36:52,199 - INFO - Total Dataset Entries                    2840                
2025-05-06 15:36:52,199 - INFO - HotpotQA Documents                       1557                
2025-05-06 15:36:52,199 - INFO - PubMedQA Documents                       12250               
2025-05-06 15:36:52,199 - INFO - Total Documents                          13807               
2025-05-06 15:36:52,199 - INFO - HotpotQA Size (MB)                       0.73                
2025-05-06 15:36:52,199 - INFO - PubMedQA Size (MB)                       4.31                
2025-05-06 15:36:52,199 - INFO - Total Dataset Size (MB)                  5.04                
2025-05-06 15:36:52,199 - INFO - Documents Stored (Batch)                 13807               
2025-05-06 15:36:52,199 - INFO - Database Entries                         13807               
2025-05-06 15:36:52,199 - INFO - Database Size (MB)                       92.65               
2025-05-06 15:36:52,199 - INFO - Total Queries Evaluated                  2840                
2025-05-06 15:36:52,199 - INFO - Embedding Mode                           sequential          
2025-05-06 15:36:52,199 - INFO - 
Timing Breakdown (Total Time: 2066.26s):
2025-05-06 15:36:52,199 - INFO - Process                                  Time (s)     Proportion (%) 
2025-05-06 15:36:52,199 - INFO - -------------------------------------------------------------------
2025-05-06 15:36:52,200 - INFO - Database Connection                      0.00         0.00           
2025-05-06 15:36:52,200 - INFO - Dataset Loading                          3.41         0.17           
2025-05-06 15:36:52,200 - INFO - Document Collection                      1.13         0.05           
2025-05-06 15:36:52,200 - INFO - Database Clearing                        0.11         0.01           
2025-05-06 15:36:52,200 - INFO - Sequential Embedding                     235.49       11.40          
2025-05-06 15:36:52,200 - INFO - Embedding Generation (Document)          235.50       11.40          
2025-05-06 15:36:52,200 - INFO - Batch Document Storage                   1.63         0.08           
2025-05-06 15:36:52,200 - INFO - Document Indexing                        10.64        0.51           
2025-05-06 15:36:52,200 - INFO - Query Preprocessing (30 candidates)      0.00         0.00           
2025-05-06 15:36:52,200 - INFO - Query Encoding (30 candidates)           620.35       30.02          
2025-05-06 15:36:52,200 - INFO - Vector Similarity Search (30 candidates) 9.28         0.45           
2025-05-06 15:36:52,200 - INFO - Evaluation Overhead (30 candidates)      160.87       7.79           
2025-05-06 15:36:52,200 - INFO - Query Preprocessing (100 candidates)     0.00         0.00           
2025-05-06 15:36:52,200 - INFO - Query Encoding (100 candidates)          614.73       29.75          
2025-05-06 15:36:52,200 - INFO - Vector Similarity Search (100 candidates) 12.78        0.62           
2025-05-06 15:36:52,200 - INFO - Evaluation Overhead (100 candidates)     160.32       7.76           
2025-05-06 15:36:52,200 - INFO - 
Evaluation Metrics (30 candidates):
2025-05-06 15:36:52,200 - INFO -   Latency (s/query): 0.2230
2025-05-06 15:36:52,200 - INFO -   Throughput (q/s): 17.65
2025-05-06 15:36:52,200 - INFO -   Precision (%): 93.70
2025-05-06 15:36:52,200 - INFO - 
Evaluation Metrics (100 candidates):
2025-05-06 15:36:52,200 - INFO -   Latency (s/query): 0.2223
2025-05-06 15:36:52,200 - INFO -   Throughput (q/s): 17.71
2025-05-06 15:36:52,200 - INFO -   Precision (%): 94.78
2025-05-06 15:36:52,200 - INFO - 
=== Summary for Model: mixedbread-ai/mxbai-embed-large-v1-512 (Batch Embedding) ===
2025-05-06 15:36:52,201 - INFO - Model Specs:
2025-05-06 15:36:52,201 - INFO -   Parameters: 335,000,000 (~335M)
2025-05-06 15:36:52,201 - INFO -   Embedding Size: 512
2025-05-06 15:36:52,201 - INFO - 
Dataset and Database Statistics:
2025-05-06 15:36:52,201 - INFO - Metric                                   Value               
2025-05-06 15:36:52,201 - INFO - ------------------------------------------------------------
2025-05-06 15:36:52,201 - INFO - HotpotQA Entries                         390                 
2025-05-06 15:36:52,201 - INFO - PubMedQA Entries                         2450                
2025-05-06 15:36:52,201 - INFO - Total Dataset Entries                    2840                
2025-05-06 15:36:52,201 - INFO - HotpotQA Documents                       1557                
2025-05-06 15:36:52,201 - INFO - PubMedQA Documents                       12250               
2025-05-06 15:36:52,201 - INFO - Total Documents                          13807               
2025-05-06 15:36:52,201 - INFO - HotpotQA Size (MB)                       0.73                
2025-05-06 15:36:52,201 - INFO - PubMedQA Size (MB)                       4.31                
2025-05-06 15:36:52,201 - INFO - Total Dataset Size (MB)                  5.04                
2025-05-06 15:36:52,201 - INFO - Documents Stored (Batch)                 13807               
2025-05-06 15:36:52,201 - INFO - Database Entries                         13807               
2025-05-06 15:36:52,201 - INFO - Database Size (MB)                       92.65               
2025-05-06 15:36:52,201 - INFO - Total Queries Evaluated                  2840                
2025-05-06 15:36:52,201 - INFO - Embedding Mode                           batch               
2025-05-06 15:36:52,201 - INFO - 
Timing Breakdown (Total Time: 1836.37s):
2025-05-06 15:36:52,201 - INFO - Process                                  Time (s)     Proportion (%) 
2025-05-06 15:36:52,201 - INFO - -------------------------------------------------------------------
2025-05-06 15:36:52,201 - INFO - Database Connection                      0.00         0.00           
2025-05-06 15:36:52,201 - INFO - Dataset Loading                          3.30         0.18           
2025-05-06 15:36:52,201 - INFO - Document Collection                      1.12         0.06           
2025-05-06 15:36:52,201 - INFO - Database Clearing                        0.12         0.01           
2025-05-06 15:36:52,201 - INFO - Batch Embedding                          121.15       6.60           
2025-05-06 15:36:52,201 - INFO - Embedding Generation (Document)          121.15       6.60           
2025-05-06 15:36:52,201 - INFO - Batch Document Storage                   1.21         0.07           
2025-05-06 15:36:52,201 - INFO - Document Indexing                        12.84        0.70           
2025-05-06 15:36:52,201 - INFO - Query Preprocessing (30 candidates)      0.00         0.00           
2025-05-06 15:36:52,201 - INFO - Query Encoding (30 candidates)           618.42       33.68          
2025-05-06 15:36:52,201 - INFO - Vector Similarity Search (30 candidates) 10.40        0.57           
2025-05-06 15:36:52,201 - INFO - Evaluation Overhead (30 candidates)      160.71       8.75           
2025-05-06 15:36:52,201 - INFO - Query Preprocessing (100 candidates)     0.00         0.00           
2025-05-06 15:36:52,201 - INFO - Query Encoding (100 candidates)          612.63       33.36          
2025-05-06 15:36:52,201 - INFO - Vector Similarity Search (100 candidates) 13.37        0.73           
2025-05-06 15:36:52,202 - INFO - Evaluation Overhead (100 candidates)     159.95       8.71           
2025-05-06 15:36:52,202 - INFO - 
Evaluation Metrics (30 candidates):
2025-05-06 15:36:52,202 - INFO -   Latency (s/query): 0.2227
2025-05-06 15:36:52,202 - INFO -   Throughput (q/s): 17.67
2025-05-06 15:36:52,202 - INFO -   Precision (%): 94.13
2025-05-06 15:36:52,202 - INFO - 
Evaluation Metrics (100 candidates):
2025-05-06 15:36:52,202 - INFO -   Latency (s/query): 0.2218
2025-05-06 15:36:52,202 - INFO -   Throughput (q/s): 17.75
2025-05-06 15:36:52,202 - INFO -   Precision (%): 95.11
2025-05-06 15:36:52,202 - INFO - 
=== Evaluating Model: mixedbread-ai/mxbai-embed-large-v1-1024 ===
2025-05-06 15:36:52,202 - INFO - Running sequential embedding mode
2025-05-06 15:36:52,204 - INFO - Use pytorch device_name: cuda:0
2025-05-06 15:36:52,204 - INFO - Load pretrained SentenceTransformer: mixedbread-ai/mxbai-embed-large-v1
2025-05-06 15:36:54,265 - INFO - 2 prompts are loaded, with the keys: ['query', 'passage']
2025-05-06 15:36:54,270 - INFO - Loading HotpotQA dataset with split: test
2025-05-06 15:36:56,017 - INFO - Loading PubMedQA dataset with split: test
2025-05-06 15:36:57,732 - INFO - Dataset Loading Duration: 3.46s
2025-05-06 15:36:58,798 - INFO - HotpotQA Test Split: 390 entries, 1557 docs, 0.73 MB
2025-05-06 15:36:58,798 - INFO - PubMedQA Test Split: 2450 entries, 12250 docs, 4.31 MB
2025-05-06 15:36:58,798 - INFO - Combined Dataset: 2840 entries, 13807 docs, 5.04 MB
2025-05-06 15:36:59,939 - INFO - Document Collection Duration: 1.14s
2025-05-06 15:36:59,939 - INFO - Total Documents to Embed: 13807
2025-05-06 15:36:59,939 - INFO - Using sequential embedding mode
2025-05-06 15:40:52,967 - INFO - Sequential Embedding Duration: 233.03s
2025-05-06 15:40:52,967 - INFO - Total Query Preprocessing: 0.00s
2025-05-06 15:40:52,967 - INFO - Total Query Encoding: 228.94s
2025-05-06 15:40:52,971 - INFO - Average Embedding Norm: 17.3352 ± 0.6315
Embedding Generation - Duration: 233.03s, CPU Time Delta: 233.06s, CPU: 0.00%, Memory: 4428.05 MB
2025-05-06 15:40:53,973 - INFO - Attempting to connect to MongoDB at mongodb://localhost:32768/?directConnection=true (Attempt 1/5)
2025-05-06 15:40:53,978 - INFO - Connected to MongoDB successfully!
2025-05-06 15:40:54,094 - INFO - Database Clearing Duration: 0.12s
2025-05-06 15:40:54,094 - INFO - Inserting documents in batch into MongoDB
2025-05-06 15:40:57,297 - INFO - Batch Document Storage Duration: 3.20s
2025-05-06 15:40:57,297 - INFO - Setting up vector index
2025-05-06 15:40:57,442 - INFO - Existing 'vector_index' dropped.
2025-05-06 15:40:57,461 - INFO - Waiting for vector index to be ready...
2025-05-06 15:41:07,878 - INFO - Vector index is now ready!
2025-05-06 15:41:07,878 - INFO - Document Indexing Duration: 10.58s
Embedding and Storage - Duration: 13.91s, CPU Time Delta: 1.32s, CPU: 0.00%, Memory: 4429.34 MB
After Index Setup - CPU: 0.00%, CPU Time: 7727.36s, Memory: 4429.34 MB
2025-05-06 15:41:09,889 - INFO - Stored 13807 documents in batch, 13807 entries in MongoDB.
Data Load (sequential) - Duration: 255.75s, CPU Time Delta: 237.13s, CPU: 0.00%, Memory: 4100.23 MB
2025-05-06 15:41:11,022 - INFO - 
Running evaluation (30 candidates, sequential)...
2025-05-06 15:41:11,022 - INFO - Starting evaluation with 2840 queries, 4 workers, 30 candidates
=== Retrieval Performance Summary ===
2025-05-06 15:43:50,492 - INFO - Database Size: 180.61 MB (13807 documents)
2025-05-06 15:43:50,492 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 15:43:50,492 - INFO - Average Precision: 94.95% (8090/8520 docs)
2025-05-06 15:43:50,492 - INFO - Average Latency: 0.2210 seconds/query
2025-05-06 15:43:50,492 - INFO - Throughput: 17.81 queries/second (with 4 workers, 30 candidates)
Evaluation (30 candidates, sequential) - Duration: 159.48s, CPU Time Delta: 232.40s, CPU: 1.00%, Memory: 4097.39 MB
2025-05-06 15:43:51,501 - INFO - 
Running evaluation (100 candidates, sequential)...
2025-05-06 15:43:51,501 - INFO - Starting evaluation with 2840 queries, 4 workers, 100 candidates
=== Retrieval Performance Summary ===
2025-05-06 15:46:28,570 - INFO - Database Size: 180.61 MB (13807 documents)
2025-05-06 15:46:28,570 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 15:46:28,570 - INFO - Average Precision: 95.62% (8147/8520 docs)
2025-05-06 15:46:28,570 - INFO - Average Latency: 0.2177 seconds/query
2025-05-06 15:46:28,570 - INFO - Throughput: 18.08 queries/second (with 4 workers, 100 candidates)
Evaluation (100 candidates, sequential) - Duration: 157.08s, CPU Time Delta: 228.96s, CPU: 0.00%, Memory: 4096.39 MB
2025-05-06 15:46:29,579 - INFO - Running batch embedding mode
2025-05-06 15:46:29,581 - INFO - Use pytorch device_name: cuda:0
2025-05-06 15:46:29,581 - INFO - Load pretrained SentenceTransformer: mixedbread-ai/mxbai-embed-large-v1
2025-05-06 15:46:31,547 - INFO - 2 prompts are loaded, with the keys: ['query', 'passage']
2025-05-06 15:46:31,552 - INFO - Loading HotpotQA dataset with split: test
2025-05-06 15:46:33,697 - INFO - Loading PubMedQA dataset with split: test
2025-05-06 15:46:35,161 - INFO - Dataset Loading Duration: 3.61s
2025-05-06 15:46:36,203 - INFO - HotpotQA Test Split: 390 entries, 1557 docs, 0.73 MB
2025-05-06 15:46:36,203 - INFO - PubMedQA Test Split: 2450 entries, 12250 docs, 4.31 MB
2025-05-06 15:46:36,203 - INFO - Combined Dataset: 2840 entries, 13807 docs, 5.04 MB
2025-05-06 15:46:37,321 - INFO - Document Collection Duration: 1.12s
2025-05-06 15:46:37,321 - INFO - Total Documents to Embed: 13807
2025-05-06 15:46:37,321 - INFO - Using batch embedding mode
2025-05-06 15:48:38,112 - INFO - Batch Embedding Duration: 120.79s
2025-05-06 15:48:38,112 - INFO - Total Query Preprocessing: 0.00s
2025-05-06 15:48:38,112 - INFO - Total Query Encoding: 34.10s
2025-05-06 15:48:38,114 - INFO - Average Embedding Norm: 17.3352 ± 0.6315
Embedding Generation - Duration: 120.79s, CPU Time Delta: 124.59s, CPU: 0.00%, Memory: 4463.25 MB
2025-05-06 15:48:39,115 - INFO - Attempting to connect to MongoDB at mongodb://localhost:32768/?directConnection=true (Attempt 1/5)
2025-05-06 15:48:39,119 - INFO - Connected to MongoDB successfully!
2025-05-06 15:48:39,259 - INFO - Database Clearing Duration: 0.14s
2025-05-06 15:48:39,259 - INFO - Inserting documents in batch into MongoDB
2025-05-06 15:48:43,248 - INFO - Batch Document Storage Duration: 3.99s
2025-05-06 15:48:43,248 - INFO - Setting up vector index
2025-05-06 15:48:55,321 - INFO - Existing 'vector_index' dropped.
2025-05-06 15:48:55,347 - INFO - Waiting for vector index to be ready...
2025-05-06 15:49:05,770 - INFO - Vector index is now ready!
2025-05-06 15:49:05,770 - INFO - Document Indexing Duration: 22.52s
Embedding and Storage - Duration: 26.66s, CPU Time Delta: 1.49s, CPU: 0.00%, Memory: 4480.29 MB
After Index Setup - CPU: 0.00%, CPU Time: 8318.10s, Memory: 4480.29 MB
2025-05-06 15:49:07,783 - INFO - Stored 13807 documents in batch, 13807 entries in MongoDB.
Data Load (batch) - Duration: 156.36s, CPU Time Delta: 128.65s, CPU: 0.00%, Memory: 4138.22 MB
2025-05-06 15:49:08,917 - INFO - 
Running evaluation (30 candidates, batch)...
2025-05-06 15:49:08,917 - INFO - Starting evaluation with 2840 queries, 4 workers, 30 candidates
2025-05-06 15:51:47,709 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 15:51:47,709 - INFO - Database Size: 180.61 MB (13807 documents)
2025-05-06 15:51:47,709 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 15:51:47,709 - INFO - Average Precision: 94.84% (8080/8520 docs)
2025-05-06 15:51:47,709 - INFO - Average Latency: 0.2201 seconds/query
2025-05-06 15:51:47,709 - INFO - Throughput: 17.89 queries/second (with 4 workers, 30 candidates)
Evaluation (30 candidates, batch) - Duration: 158.80s, CPU Time Delta: 231.73s, CPU: 0.00%, Memory: 4006.41 MB
2025-05-06 15:51:48,718 - INFO - 
Running evaluation (100 candidates, batch)...
2025-05-06 15:51:48,719 - INFO - Starting evaluation with 2840 queries, 4 workers, 100 candidates
2025-05-06 15:54:25,751 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 15:54:25,751 - INFO - Database Size: 180.61 MB (13807 documents)
2025-05-06 15:54:25,751 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 15:54:25,751 - INFO - Average Precision: 95.54% (8140/8520 docs)
2025-05-06 15:54:25,751 - INFO - Average Latency: 0.2176 seconds/query
2025-05-06 15:54:25,751 - INFO - Throughput: 18.09 queries/second (with 4 workers, 100 candidates)
Evaluation (100 candidates, batch) - Duration: 157.04s, CPU Time Delta: 228.69s, CPU: 0.00%, Memory: 4003.43 MB
2025-05-06 15:54:26,761 - INFO - 
=== Summary for Model: mixedbread-ai/mxbai-embed-large-v1-1024 (Sequential Embedding) ===
2025-05-06 15:54:26,762 - INFO - Model Specs:
2025-05-06 15:54:26,762 - INFO -   Parameters: 335,000,000 (~335M)
2025-05-06 15:54:26,762 - INFO -   Embedding Size: 1024
2025-05-06 15:54:26,762 - INFO - 
Dataset and Database Statistics:
2025-05-06 15:54:26,762 - INFO - Metric                                   Value               
2025-05-06 15:54:26,762 - INFO - ------------------------------------------------------------
2025-05-06 15:54:26,762 - INFO - HotpotQA Entries                         390                 
2025-05-06 15:54:26,762 - INFO - PubMedQA Entries                         2450                
2025-05-06 15:54:26,762 - INFO - Total Dataset Entries                    2840                
2025-05-06 15:54:26,762 - INFO - HotpotQA Documents                       1557                
2025-05-06 15:54:26,762 - INFO - PubMedQA Documents                       12250               
2025-05-06 15:54:26,762 - INFO - Total Documents                          13807               
2025-05-06 15:54:26,762 - INFO - HotpotQA Size (MB)                       0.73                
2025-05-06 15:54:26,762 - INFO - PubMedQA Size (MB)                       4.31                
2025-05-06 15:54:26,762 - INFO - Total Dataset Size (MB)                  5.04                
2025-05-06 15:54:26,762 - INFO - Documents Stored (Batch)                 13807               
2025-05-06 15:54:26,762 - INFO - Database Entries                         13807               
2025-05-06 15:54:26,762 - INFO - Database Size (MB)                       180.61              
2025-05-06 15:54:26,762 - INFO - Total Queries Evaluated                  2840                
2025-05-06 15:54:26,762 - INFO - Embedding Mode                           sequential          
2025-05-06 15:54:26,762 - INFO - 
Timing Breakdown (Total Time: 2039.13s):
2025-05-06 15:54:26,762 - INFO - Process                                  Time (s)     Proportion (%) 
2025-05-06 15:54:26,762 - INFO - -------------------------------------------------------------------
2025-05-06 15:54:26,762 - INFO - Database Connection                      0.01         0.00           
2025-05-06 15:54:26,762 - INFO - Dataset Loading                          3.46         0.17           
2025-05-06 15:54:26,762 - INFO - Document Collection                      1.14         0.06           
2025-05-06 15:54:26,762 - INFO - Database Clearing                        0.12         0.01           
2025-05-06 15:54:26,762 - INFO - Sequential Embedding                     233.03       11.43          
2025-05-06 15:54:26,762 - INFO - Embedding Generation (Document)          233.03       11.43          
2025-05-06 15:54:26,762 - INFO - Batch Document Storage                   3.20         0.16           
2025-05-06 15:54:26,762 - INFO - Document Indexing                        10.58        0.52           
2025-05-06 15:54:26,762 - INFO - Query Preprocessing (30 candidates)      0.00         0.00           
2025-05-06 15:54:26,762 - INFO - Query Encoding (30 candidates)           609.15       29.87          
2025-05-06 15:54:26,762 - INFO - Vector Similarity Search (30 candidates) 14.60        0.72           
2025-05-06 15:54:26,762 - INFO - Evaluation Overhead (30 candidates)      159.45       7.82           
2025-05-06 15:54:26,762 - INFO - Query Preprocessing (100 candidates)     0.00         0.00           
2025-05-06 15:54:26,762 - INFO - Query Encoding (100 candidates)          592.08       29.04          
2025-05-06 15:54:26,762 - INFO - Vector Similarity Search (100 candidates) 22.22        1.09           
2025-05-06 15:54:26,762 - INFO - Evaluation Overhead (100 candidates)     157.05       7.70           
2025-05-06 15:54:26,762 - INFO - 
Evaluation Metrics (30 candidates):
2025-05-06 15:54:26,762 - INFO -   Latency (s/query): 0.2210
2025-05-06 15:54:26,762 - INFO -   Throughput (q/s): 17.81
2025-05-06 15:54:26,762 - INFO -   Precision (%): 94.95
2025-05-06 15:54:26,762 - INFO - 
Evaluation Metrics (100 candidates):
2025-05-06 15:54:26,762 - INFO -   Latency (s/query): 0.2177
2025-05-06 15:54:26,762 - INFO -   Throughput (q/s): 18.08
2025-05-06 15:54:26,762 - INFO -   Precision (%): 95.62
2025-05-06 15:54:26,762 - INFO - 
=== Summary for Model: mixedbread-ai/mxbai-embed-large-v1-1024 (Batch Embedding) ===
2025-05-06 15:54:26,762 - INFO - Model Specs:
2025-05-06 15:54:26,763 - INFO -   Parameters: 335,000,000 (~335M)
2025-05-06 15:54:26,763 - INFO -   Embedding Size: 1024
2025-05-06 15:54:26,763 - INFO - 
Dataset and Database Statistics:
2025-05-06 15:54:26,763 - INFO - Metric                                   Value               
2025-05-06 15:54:26,763 - INFO - ------------------------------------------------------------
2025-05-06 15:54:26,763 - INFO - HotpotQA Entries                         390                 
2025-05-06 15:54:26,763 - INFO - PubMedQA Entries                         2450                
2025-05-06 15:54:26,763 - INFO - Total Dataset Entries                    2840                
2025-05-06 15:54:26,763 - INFO - HotpotQA Documents                       1557                
2025-05-06 15:54:26,763 - INFO - PubMedQA Documents                       12250               
2025-05-06 15:54:26,763 - INFO - Total Documents                          13807               
2025-05-06 15:54:26,763 - INFO - HotpotQA Size (MB)                       0.73                
2025-05-06 15:54:26,763 - INFO - PubMedQA Size (MB)                       4.31                
2025-05-06 15:54:26,763 - INFO - Total Dataset Size (MB)                  5.04                
2025-05-06 15:54:26,763 - INFO - Documents Stored (Batch)                 13807               
2025-05-06 15:54:26,763 - INFO - Database Entries                         13807               
2025-05-06 15:54:26,763 - INFO - Database Size (MB)                       180.61              
2025-05-06 15:54:26,763 - INFO - Total Queries Evaluated                  2840                
2025-05-06 15:54:26,763 - INFO - Embedding Mode                           batch               
2025-05-06 15:54:26,763 - INFO - 
Timing Breakdown (Total Time: 1824.05s):
2025-05-06 15:54:26,763 - INFO - Process                                  Time (s)     Proportion (%) 
2025-05-06 15:54:26,763 - INFO - -------------------------------------------------------------------
2025-05-06 15:54:26,763 - INFO - Database Connection                      0.00         0.00           
2025-05-06 15:54:26,763 - INFO - Dataset Loading                          3.61         0.20           
2025-05-06 15:54:26,763 - INFO - Document Collection                      1.12         0.06           
2025-05-06 15:54:26,763 - INFO - Database Clearing                        0.14         0.01           
2025-05-06 15:54:26,763 - INFO - Batch Embedding                          120.79       6.62           
2025-05-06 15:54:26,763 - INFO - Embedding Generation (Document)          120.79       6.62           
2025-05-06 15:54:26,763 - INFO - Batch Document Storage                   3.99         0.22           
2025-05-06 15:54:26,763 - INFO - Document Indexing                        22.52        1.23           
2025-05-06 15:54:26,763 - INFO - Query Preprocessing (30 candidates)      0.00         0.00           
2025-05-06 15:54:26,763 - INFO - Query Encoding (30 candidates)           606.00       33.22          
2025-05-06 15:54:26,763 - INFO - Vector Similarity Search (30 candidates) 15.17        0.83           
2025-05-06 15:54:26,763 - INFO - Evaluation Overhead (30 candidates)      158.78       8.70           
2025-05-06 15:54:26,763 - INFO - Query Preprocessing (100 candidates)     0.00         0.00           
2025-05-06 15:54:26,763 - INFO - Query Encoding (100 candidates)          589.99       32.34          
2025-05-06 15:54:26,763 - INFO - Vector Similarity Search (100 candidates) 24.14        1.32           
2025-05-06 15:54:26,763 - INFO - Evaluation Overhead (100 candidates)     157.02       8.61           
2025-05-06 15:54:26,763 - INFO - 
Evaluation Metrics (30 candidates):
2025-05-06 15:54:26,763 - INFO -   Latency (s/query): 0.2201
2025-05-06 15:54:26,763 - INFO -   Throughput (q/s): 17.89
2025-05-06 15:54:26,763 - INFO -   Precision (%): 94.84
2025-05-06 15:54:26,763 - INFO - 
Evaluation Metrics (100 candidates):
2025-05-06 15:54:26,763 - INFO -   Latency (s/query): 0.2176
2025-05-06 15:54:26,763 - INFO -   Throughput (q/s): 18.09
2025-05-06 15:54:26,763 - INFO -   Precision (%): 95.54
2025-05-06 15:54:26,763 - INFO - 
=== Evaluating Model: sentence-transformers/all-MiniLM-L6-v2 ===
2025-05-06 15:54:26,763 - INFO - Running sequential embedding mode
2025-05-06 15:54:26,765 - INFO - Use pytorch device_name: cuda:0
2025-05-06 15:54:26,765 - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-05-06 15:54:27,939 - INFO - Loading HotpotQA dataset with split: test
2025-05-06 15:54:29,594 - INFO - Loading PubMedQA dataset with split: test
2025-05-06 15:54:31,162 - INFO - Dataset Loading Duration: 3.22s
2025-05-06 15:54:32,220 - INFO - HotpotQA Test Split: 390 entries, 1557 docs, 0.73 MB
2025-05-06 15:54:32,220 - INFO - PubMedQA Test Split: 2450 entries, 12250 docs, 4.31 MB
2025-05-06 15:54:32,220 - INFO - Combined Dataset: 2840 entries, 13807 docs, 5.04 MB
2025-05-06 15:54:33,350 - INFO - Document Collection Duration: 1.13s
2025-05-06 15:54:33,350 - INFO - Total Documents to Embed: 13807
2025-05-06 15:54:33,350 - INFO - Using sequential embedding mode
2025-05-06 15:55:52,253 - INFO - Sequential Embedding Duration: 78.90s
2025-05-06 15:55:52,253 - INFO - Total Query Preprocessing: 0.00s
2025-05-06 15:55:52,253 - INFO - Total Query Encoding: 76.60s
2025-05-06 15:55:52,257 - INFO - Average Embedding Norm: 1.0000 ± 0.0000
Embedding Generation - Duration: 78.91s, CPU Time Delta: 78.83s, CPU: 0.00%, Memory: 4064.67 MB
2025-05-06 15:55:53,258 - INFO - Attempting to connect to MongoDB at mongodb://localhost:32768/?directConnection=true (Attempt 1/5)
2025-05-06 15:55:53,262 - INFO - Connected to MongoDB successfully!
2025-05-06 15:55:53,395 - INFO - Database Clearing Duration: 0.13s
2025-05-06 15:55:53,395 - INFO - Inserting documents in batch into MongoDB
2025-05-06 15:55:54,394 - INFO - Batch Document Storage Duration: 1.00s
2025-05-06 15:55:54,394 - INFO - Setting up vector index
2025-05-06 15:55:54,609 - INFO - Existing 'vector_index' dropped.
2025-05-06 15:55:54,624 - INFO - Waiting for vector index to be ready...
2025-05-06 15:56:01,237 - INFO - Vector index is now ready!
2025-05-06 15:56:01,237 - INFO - Document Indexing Duration: 6.84s
Embedding and Storage - Duration: 7.98s, CPU Time Delta: 0.50s, CPU: 0.00%, Memory: 4065.70 MB
After Index Setup - CPU: 0.00%, CPU Time: 8860.54s, Memory: 4065.70 MB
2025-05-06 15:56:03,249 - INFO - Stored 13807 documents in batch, 13807 entries in MongoDB.
Data Load (sequential) - Duration: 95.37s, CPU Time Delta: 81.83s, CPU: 0.00%, Memory: 4012.06 MB
2025-05-06 15:56:04,309 - INFO - 
Running evaluation (30 candidates, sequential)...
2025-05-06 15:56:04,309 - INFO - Starting evaluation with 2840 queries, 4 workers, 30 candidates
2025-05-06 15:57:00,100 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 15:57:00,100 - INFO - Database Size: 70.74 MB (13807 documents)
2025-05-06 15:57:00,100 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 15:57:00,100 - INFO - Average Precision: 93.13% (7935/8520 docs)
2025-05-06 15:57:00,100 - INFO - Average Latency: 0.0752 seconds/query
2025-05-06 15:57:00,100 - INFO - Throughput: 50.91 queries/second (with 4 workers, 30 candidates)
Evaluation (30 candidates, sequential) - Duration: 55.80s, CPU Time Delta: 77.30s, CPU: 0.00%, Memory: 3654.39 MB
2025-05-06 15:57:01,109 - INFO - 
Running evaluation (100 candidates, sequential)...
2025-05-06 15:57:01,109 - INFO - Starting evaluation with 2840 queries, 4 workers, 100 candidates
2025-05-06 15:57:56,682 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 15:57:56,682 - INFO - Database Size: 70.74 MB (13807 documents)
2025-05-06 15:57:56,683 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 15:57:56,683 - INFO - Average Precision: 93.45% (7962/8520 docs)
2025-05-06 15:57:56,683 - INFO - Average Latency: 0.0748 seconds/query
2025-05-06 15:57:56,683 - INFO - Throughput: 51.11 queries/second (with 4 workers, 100 candidates)
Evaluation (100 candidates, sequential) - Duration: 55.58s, CPU Time Delta: 76.46s, CPU: 0.00%, Memory: 3654.39 MB
2025-05-06 15:57:57,691 - INFO - Running batch embedding mode
2025-05-06 15:57:57,693 - INFO - Use pytorch device_name: cuda:0
2025-05-06 15:57:57,693 - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-05-06 15:57:58,920 - INFO - Loading HotpotQA dataset with split: test
2025-05-06 15:58:00,969 - INFO - Loading PubMedQA dataset with split: test
2025-05-06 15:58:02,489 - INFO - Dataset Loading Duration: 3.57s
2025-05-06 15:58:03,520 - INFO - HotpotQA Test Split: 390 entries, 1557 docs, 0.73 MB
2025-05-06 15:58:03,520 - INFO - PubMedQA Test Split: 2450 entries, 12250 docs, 4.31 MB
2025-05-06 15:58:03,520 - INFO - Combined Dataset: 2840 entries, 13807 docs, 5.04 MB
2025-05-06 15:58:04,633 - INFO - Document Collection Duration: 1.11s
2025-05-06 15:58:04,633 - INFO - Total Documents to Embed: 13807
2025-05-06 15:58:04,633 - INFO - Using batch embedding mode
2025-05-06 15:58:19,342 - INFO - Batch Embedding Duration: 14.71s
2025-05-06 15:58:19,343 - INFO - Total Query Preprocessing: 0.00s
2025-05-06 15:58:19,343 - INFO - Total Query Encoding: 13.21s
2025-05-06 15:58:19,344 - INFO - Average Embedding Norm: 1.0000 ± 0.0000
Embedding Generation - Duration: 14.71s, CPU Time Delta: 18.34s, CPU: 0.00%, Memory: 3732.39 MB
2025-05-06 15:58:20,346 - INFO - Attempting to connect to MongoDB at mongodb://localhost:32768/?directConnection=true (Attempt 1/5)
2025-05-06 15:58:20,350 - INFO - Connected to MongoDB successfully!
2025-05-06 15:58:20,469 - INFO - Database Clearing Duration: 0.12s
2025-05-06 15:58:20,469 - INFO - Inserting documents in batch into MongoDB
2025-05-06 15:58:21,432 - INFO - Batch Document Storage Duration: 0.96s
2025-05-06 15:58:21,432 - INFO - Setting up vector index
2025-05-06 15:58:24,031 - INFO - Existing 'vector_index' dropped.
2025-05-06 15:58:24,053 - INFO - Waiting for vector index to be ready...
2025-05-06 15:58:30,666 - INFO - Vector index is now ready!
2025-05-06 15:58:30,666 - INFO - Document Indexing Duration: 9.23s
Embedding and Storage - Duration: 10.32s, CPU Time Delta: 0.53s, CPU: 0.00%, Memory: 3733.63 MB
After Index Setup - CPU: 0.00%, CPU Time: 9035.74s, Memory: 3733.63 MB
2025-05-06 15:58:32,677 - INFO - Stored 13807 documents in batch, 13807 entries in MongoDB.
Data Load (batch) - Duration: 33.82s, CPU Time Delta: 21.34s, CPU: 0.00%, Memory: 3660.04 MB
2025-05-06 15:58:33,738 - INFO - 
Running evaluation (30 candidates, batch)...
2025-05-06 15:58:33,738 - INFO - Starting evaluation with 2840 queries, 4 workers, 30 candidates
2025-05-06 15:59:29,615 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 15:59:29,615 - INFO - Database Size: 70.74 MB (13807 documents)
2025-05-06 15:59:29,615 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 15:59:29,615 - INFO - Average Precision: 92.83% (7909/8520 docs)
2025-05-06 15:59:29,615 - INFO - Average Latency: 0.0753 seconds/query
2025-05-06 15:59:29,615 - INFO - Throughput: 50.84 queries/second (with 4 workers, 30 candidates)
Evaluation (30 candidates, batch) - Duration: 55.88s, CPU Time Delta: 77.52s, CPU: 0.00%, Memory: 3657.06 MB
2025-05-06 15:59:30,624 - INFO - 
Running evaluation (100 candidates, batch)...
2025-05-06 15:59:30,624 - INFO - Starting evaluation with 2840 queries, 4 workers, 100 candidates
2025-05-06 16:00:25,975 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 16:00:25,975 - INFO - Database Size: 70.74 MB (13807 documents)
2025-05-06 16:00:25,975 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 16:00:25,975 - INFO - Average Precision: 93.38% (7956/8520 docs)
2025-05-06 16:00:25,975 - INFO - Average Latency: 0.0745 seconds/query
2025-05-06 16:00:25,975 - INFO - Throughput: 51.32 queries/second (with 4 workers, 100 candidates)
Evaluation (100 candidates, batch) - Duration: 55.36s, CPU Time Delta: 76.26s, CPU: 0.00%, Memory: 3657.06 MB
2025-05-06 16:00:26,985 - INFO - 
=== Summary for Model: sentence-transformers/all-MiniLM-L6-v2 (Sequential Embedding) ===
2025-05-06 16:00:26,985 - INFO - Model Specs:
2025-05-06 16:00:26,985 - INFO -   Parameters: 22,700,000 (~22M)
2025-05-06 16:00:26,985 - INFO -   Embedding Size: 384
2025-05-06 16:00:26,985 - INFO - 
Dataset and Database Statistics:
2025-05-06 16:00:26,985 - INFO - Metric                                   Value               
2025-05-06 16:00:26,985 - INFO - ------------------------------------------------------------
2025-05-06 16:00:26,985 - INFO - HotpotQA Entries                         390                 
2025-05-06 16:00:26,985 - INFO - PubMedQA Entries                         2450                
2025-05-06 16:00:26,985 - INFO - Total Dataset Entries                    2840                
2025-05-06 16:00:26,985 - INFO - HotpotQA Documents                       1557                
2025-05-06 16:00:26,985 - INFO - PubMedQA Documents                       12250               
2025-05-06 16:00:26,985 - INFO - Total Documents                          13807               
2025-05-06 16:00:26,985 - INFO - HotpotQA Size (MB)                       0.73                
2025-05-06 16:00:26,986 - INFO - PubMedQA Size (MB)                       4.31                
2025-05-06 16:00:26,986 - INFO - Total Dataset Size (MB)                  5.04                
2025-05-06 16:00:26,986 - INFO - Documents Stored (Batch)                 13807               
2025-05-06 16:00:26,986 - INFO - Database Entries                         13807               
2025-05-06 16:00:26,986 - INFO - Database Size (MB)                       70.74               
2025-05-06 16:00:26,986 - INFO - Total Queries Evaluated                  2840                
2025-05-06 16:00:26,986 - INFO - Embedding Mode                           sequential          
2025-05-06 16:00:26,986 - INFO - 
Timing Breakdown (Total Time: 700.24s):
2025-05-06 16:00:26,986 - INFO - Process                                  Time (s)     Proportion (%) 
2025-05-06 16:00:26,986 - INFO - -------------------------------------------------------------------
2025-05-06 16:00:26,986 - INFO - Database Connection                      0.00         0.00           
2025-05-06 16:00:26,986 - INFO - Dataset Loading                          3.22         0.46           
2025-05-06 16:00:26,986 - INFO - Document Collection                      1.13         0.16           
2025-05-06 16:00:26,986 - INFO - Database Clearing                        0.13         0.02           
2025-05-06 16:00:26,986 - INFO - Sequential Embedding                     78.90        11.27          
2025-05-06 16:00:26,986 - INFO - Embedding Generation (Document)          78.91        11.27          
2025-05-06 16:00:26,986 - INFO - Batch Document Storage                   1.00         0.14           
2025-05-06 16:00:26,986 - INFO - Document Indexing                        6.84         0.98           
2025-05-06 16:00:26,986 - INFO - Query Preprocessing (30 candidates)      0.00         0.00           
2025-05-06 16:00:26,986 - INFO - Query Encoding (30 candidates)           200.23       28.59          
2025-05-06 16:00:26,986 - INFO - Vector Similarity Search (30 candidates) 9.66         1.38           
2025-05-06 16:00:26,986 - INFO - Evaluation Overhead (30 candidates)      55.78        7.97           
2025-05-06 16:00:26,986 - INFO - Query Preprocessing (100 candidates)     0.00         0.00           
2025-05-06 16:00:26,986 - INFO - Query Encoding (100 candidates)          192.18       27.44          
2025-05-06 16:00:26,986 - INFO - Vector Similarity Search (100 candidates) 16.70        2.38           
2025-05-06 16:00:26,986 - INFO - Evaluation Overhead (100 candidates)     55.56        7.93           
2025-05-06 16:00:26,986 - INFO - 
Evaluation Metrics (30 candidates):
2025-05-06 16:00:26,986 - INFO -   Latency (s/query): 0.0752
2025-05-06 16:00:26,986 - INFO -   Throughput (q/s): 50.91
2025-05-06 16:00:26,986 - INFO -   Precision (%): 93.13
2025-05-06 16:00:26,986 - INFO - 
Evaluation Metrics (100 candidates):
2025-05-06 16:00:26,986 - INFO -   Latency (s/query): 0.0748
2025-05-06 16:00:26,986 - INFO -   Throughput (q/s): 51.11
2025-05-06 16:00:26,986 - INFO -   Precision (%): 93.45
2025-05-06 16:00:26,986 - INFO - 
=== Summary for Model: sentence-transformers/all-MiniLM-L6-v2 (Batch Embedding) ===
2025-05-06 16:00:26,986 - INFO - Model Specs:
2025-05-06 16:00:26,986 - INFO -   Parameters: 22,700,000 (~22M)
2025-05-06 16:00:26,986 - INFO -   Embedding Size: 384
2025-05-06 16:00:26,986 - INFO - 
Dataset and Database Statistics:
2025-05-06 16:00:26,986 - INFO - Metric                                   Value               
2025-05-06 16:00:26,986 - INFO - ------------------------------------------------------------
2025-05-06 16:00:26,986 - INFO - HotpotQA Entries                         390                 
2025-05-06 16:00:26,986 - INFO - PubMedQA Entries                         2450                
2025-05-06 16:00:26,986 - INFO - Total Dataset Entries                    2840                
2025-05-06 16:00:26,986 - INFO - HotpotQA Documents                       1557                
2025-05-06 16:00:26,986 - INFO - PubMedQA Documents                       12250               
2025-05-06 16:00:26,986 - INFO - Total Documents                          13807               
2025-05-06 16:00:26,986 - INFO - HotpotQA Size (MB)                       0.73                
2025-05-06 16:00:26,986 - INFO - PubMedQA Size (MB)                       4.31                
2025-05-06 16:00:26,986 - INFO - Total Dataset Size (MB)                  5.04                
2025-05-06 16:00:26,986 - INFO - Documents Stored (Batch)                 13807               
2025-05-06 16:00:26,986 - INFO - Database Entries                         13807               
2025-05-06 16:00:26,986 - INFO - Database Size (MB)                       70.74               
2025-05-06 16:00:26,987 - INFO - Total Queries Evaluated                  2840                
2025-05-06 16:00:26,987 - INFO - Embedding Mode                           batch               
2025-05-06 16:00:26,987 - INFO - 
Timing Breakdown (Total Time: 573.80s):
2025-05-06 16:00:26,987 - INFO - Process                                  Time (s)     Proportion (%) 
2025-05-06 16:00:26,987 - INFO - -------------------------------------------------------------------
2025-05-06 16:00:26,987 - INFO - Database Connection                      0.00         0.00           
2025-05-06 16:00:26,987 - INFO - Dataset Loading                          3.57         0.62           
2025-05-06 16:00:26,987 - INFO - Document Collection                      1.11         0.19           
2025-05-06 16:00:26,987 - INFO - Database Clearing                        0.12         0.02           
2025-05-06 16:00:26,987 - INFO - Batch Embedding                          14.71        2.56           
2025-05-06 16:00:26,987 - INFO - Embedding Generation (Document)          14.71        2.56           
2025-05-06 16:00:26,987 - INFO - Batch Document Storage                   0.96         0.17           
2025-05-06 16:00:26,987 - INFO - Document Indexing                        9.23         1.61           
2025-05-06 16:00:26,987 - INFO - Query Preprocessing (30 candidates)      0.00         0.00           
2025-05-06 16:00:26,987 - INFO - Query Encoding (30 candidates)           199.81       34.82          
2025-05-06 16:00:26,987 - INFO - Vector Similarity Search (30 candidates) 10.40        1.81           
2025-05-06 16:00:26,987 - INFO - Evaluation Overhead (30 candidates)      55.86        9.74           
2025-05-06 16:00:26,987 - INFO - Query Preprocessing (100 candidates)     0.00         0.00           
2025-05-06 16:00:26,987 - INFO - Query Encoding (100 candidates)          189.31       32.99          
2025-05-06 16:00:26,987 - INFO - Vector Similarity Search (100 candidates) 18.66        3.25           
2025-05-06 16:00:26,987 - INFO - Evaluation Overhead (100 candidates)     55.34        9.64           
2025-05-06 16:00:26,987 - INFO - 
Evaluation Metrics (30 candidates):
2025-05-06 16:00:26,987 - INFO -   Latency (s/query): 0.0753
2025-05-06 16:00:26,987 - INFO -   Throughput (q/s): 50.84
2025-05-06 16:00:26,987 - INFO -   Precision (%): 92.83
2025-05-06 16:00:26,987 - INFO - 
Evaluation Metrics (100 candidates):
2025-05-06 16:00:26,987 - INFO -   Latency (s/query): 0.0745
2025-05-06 16:00:26,987 - INFO -   Throughput (q/s): 51.32
2025-05-06 16:00:26,987 - INFO -   Precision (%): 93.38
2025-05-06 16:00:26,987 - INFO - 
=== Evaluating Model: intfloat/e5-small-v2 ===
2025-05-06 16:00:26,987 - INFO - Running sequential embedding mode
2025-05-06 16:00:26,989 - INFO - Use pytorch device_name: cuda:0
2025-05-06 16:00:26,989 - INFO - Load pretrained SentenceTransformer: intfloat/e5-small-v2
2025-05-06 16:00:31,217 - INFO - Loading HotpotQA dataset with split: test
2025-05-06 16:00:32,886 - INFO - Loading PubMedQA dataset with split: test
2025-05-06 16:00:34,375 - INFO - Dataset Loading Duration: 3.16s
2025-05-06 16:00:35,417 - INFO - HotpotQA Test Split: 390 entries, 1557 docs, 0.73 MB
2025-05-06 16:00:35,418 - INFO - PubMedQA Test Split: 2450 entries, 12250 docs, 4.31 MB
2025-05-06 16:00:35,418 - INFO - Combined Dataset: 2840 entries, 13807 docs, 5.04 MB
2025-05-06 16:00:36,538 - INFO - Document Collection Duration: 1.12s
2025-05-06 16:00:36,538 - INFO - Total Documents to Embed: 13807
2025-05-06 16:00:36,539 - INFO - Using sequential embedding mode
2025-05-06 16:02:46,265 - INFO - Sequential Embedding Duration: 129.73s
2025-05-06 16:02:46,265 - INFO - Total Query Preprocessing: 0.00s
2025-05-06 16:02:46,265 - INFO - Total Query Encoding: 127.85s
2025-05-06 16:02:46,269 - INFO - Average Embedding Norm: 1.0000 ± 0.0000
Embedding Generation - Duration: 129.73s, CPU Time Delta: 129.72s, CPU: 0.00%, Memory: 3711.00 MB
2025-05-06 16:02:47,270 - INFO - Attempting to connect to MongoDB at mongodb://localhost:32768/?directConnection=true (Attempt 1/5)
2025-05-06 16:02:47,274 - INFO - Connected to MongoDB successfully!
2025-05-06 16:02:47,386 - INFO - Database Clearing Duration: 0.11s
2025-05-06 16:02:47,386 - INFO - Inserting documents in batch into MongoDB
2025-05-06 16:02:48,405 - INFO - Batch Document Storage Duration: 1.02s
2025-05-06 16:02:48,405 - INFO - Setting up vector index
2025-05-06 16:02:50,641 - INFO - Existing 'vector_index' dropped.
2025-05-06 16:02:50,665 - INFO - Waiting for vector index to be ready...
2025-05-06 16:02:57,278 - INFO - Vector index is now ready!
2025-05-06 16:02:57,278 - INFO - Document Indexing Duration: 8.87s
Embedding and Storage - Duration: 10.01s, CPU Time Delta: 0.49s, CPU: 0.00%, Memory: 3711.77 MB
After Index Setup - CPU: 0.00%, CPU Time: 9322.70s, Memory: 3711.77 MB
2025-05-06 16:02:59,287 - INFO - Stored 13807 documents in batch, 13807 entries in MongoDB.
Data Load (sequential) - Duration: 148.13s, CPU Time Delta: 132.69s, CPU: 0.00%, Memory: 3658.27 MB
2025-05-06 16:03:00,347 - INFO - 
Running evaluation (30 candidates, sequential)...
2025-05-06 16:03:00,347 - INFO - Starting evaluation with 2840 queries, 4 workers, 30 candidates
2025-05-06 16:04:30,792 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 16:04:30,792 - INFO - Database Size: 70.74 MB (13807 documents)
2025-05-06 16:04:30,792 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 16:04:30,792 - INFO - Average Precision: 91.90% (7830/8520 docs)
2025-05-06 16:04:30,792 - INFO - Average Latency: 0.1241 seconds/query
2025-05-06 16:04:30,792 - INFO - Throughput: 31.40 queries/second (with 4 workers, 30 candidates)
Evaluation (30 candidates, sequential) - Duration: 90.45s, CPU Time Delta: 130.34s, CPU: 0.00%, Memory: 3655.34 MB
2025-05-06 16:04:31,801 - INFO - 
Running evaluation (100 candidates, sequential)...
2025-05-06 16:04:31,801 - INFO - Starting evaluation with 2840 queries, 4 workers, 100 candidates
2025-05-06 16:06:01,334 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 16:06:01,334 - INFO - Database Size: 70.74 MB (13807 documents)
2025-05-06 16:06:01,334 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 16:06:01,334 - INFO - Average Precision: 93.66% (7980/8520 docs)
2025-05-06 16:06:01,334 - INFO - Average Latency: 0.1229 seconds/query
2025-05-06 16:06:01,334 - INFO - Throughput: 31.72 queries/second (with 4 workers, 100 candidates)
Evaluation (100 candidates, sequential) - Duration: 89.54s, CPU Time Delta: 128.40s, CPU: 0.00%, Memory: 3654.36 MB
2025-05-06 16:06:02,343 - INFO - Running batch embedding mode
2025-05-06 16:06:02,345 - INFO - Use pytorch device_name: cuda:0
2025-05-06 16:06:02,345 - INFO - Load pretrained SentenceTransformer: intfloat/e5-small-v2
2025-05-06 16:06:03,782 - INFO - Loading HotpotQA dataset with split: test
2025-05-06 16:06:05,518 - INFO - Loading PubMedQA dataset with split: test
2025-05-06 16:06:07,001 - INFO - Dataset Loading Duration: 3.22s
2025-05-06 16:06:08,068 - INFO - HotpotQA Test Split: 390 entries, 1557 docs, 0.73 MB
2025-05-06 16:06:08,068 - INFO - PubMedQA Test Split: 2450 entries, 12250 docs, 4.31 MB
2025-05-06 16:06:08,068 - INFO - Combined Dataset: 2840 entries, 13807 docs, 5.04 MB
2025-05-06 16:06:09,208 - INFO - Document Collection Duration: 1.14s
2025-05-06 16:06:09,208 - INFO - Total Documents to Embed: 13807
2025-05-06 16:06:09,208 - INFO - Using batch embedding mode
2025-05-06 16:06:32,646 - INFO - Batch Embedding Duration: 23.44s
2025-05-06 16:06:32,646 - INFO - Total Query Preprocessing: 0.00s
2025-05-06 16:06:32,646 - INFO - Total Query Encoding: 20.13s
2025-05-06 16:06:32,647 - INFO - Average Embedding Norm: 1.0000 ± 0.0000
Embedding Generation - Duration: 23.44s, CPU Time Delta: 27.14s, CPU: 0.00%, Memory: 3732.87 MB
2025-05-06 16:06:33,648 - INFO - Attempting to connect to MongoDB at mongodb://localhost:32768/?directConnection=true (Attempt 1/5)
2025-05-06 16:06:33,652 - INFO - Connected to MongoDB successfully!
2025-05-06 16:06:33,779 - INFO - Database Clearing Duration: 0.13s
2025-05-06 16:06:33,779 - INFO - Inserting documents in batch into MongoDB
2025-05-06 16:06:34,725 - INFO - Batch Document Storage Duration: 0.95s
2025-05-06 16:06:34,725 - INFO - Setting up vector index
2025-05-06 16:06:36,941 - INFO - Existing 'vector_index' dropped.
2025-05-06 16:06:36,963 - INFO - Waiting for vector index to be ready...
2025-05-06 16:06:43,576 - INFO - Vector index is now ready!
2025-05-06 16:06:43,576 - INFO - Document Indexing Duration: 8.85s
Embedding and Storage - Duration: 9.93s, CPU Time Delta: 0.49s, CPU: 0.00%, Memory: 3733.90 MB
After Index Setup - CPU: 1.00%, CPU Time: 9611.76s, Memory: 3733.90 MB
2025-05-06 16:06:45,586 - INFO - Stored 13807 documents in batch, 13807 entries in MongoDB.
Data Load (batch) - Duration: 41.86s, CPU Time Delta: 30.15s, CPU: 0.00%, Memory: 3664.46 MB
2025-05-06 16:06:46,646 - INFO - 
Running evaluation (30 candidates, batch)...
2025-05-06 16:06:46,647 - INFO - Starting evaluation with 2840 queries, 4 workers, 30 candidates
2025-05-06 16:08:17,339 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 16:08:17,339 - INFO - Database Size: 70.74 MB (13807 documents)
2025-05-06 16:08:17,339 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 16:08:17,339 - INFO - Average Precision: 91.42% (7789/8520 docs)
2025-05-06 16:08:17,339 - INFO - Average Latency: 0.1244 seconds/query
2025-05-06 16:08:17,339 - INFO - Throughput: 31.32 queries/second (with 4 workers, 30 candidates)
Evaluation (30 candidates, batch) - Duration: 90.70s, CPU Time Delta: 130.52s, CPU: 0.00%, Memory: 3656.37 MB
2025-05-06 16:08:18,348 - INFO - 
Running evaluation (100 candidates, batch)...
2025-05-06 16:08:18,348 - INFO - Starting evaluation with 2840 queries, 4 workers, 100 candidates
2025-05-06 16:09:47,937 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 16:09:47,937 - INFO - Database Size: 70.74 MB (13807 documents)
2025-05-06 16:09:47,937 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 16:09:47,937 - INFO - Average Precision: 93.62% (7976/8520 docs)
2025-05-06 16:09:47,937 - INFO - Average Latency: 0.1229 seconds/query
2025-05-06 16:09:47,937 - INFO - Throughput: 31.70 queries/second (with 4 workers, 100 candidates)
Evaluation (100 candidates, batch) - Duration: 89.60s, CPU Time Delta: 128.38s, CPU: 0.00%, Memory: 3656.37 MB
2025-05-06 16:09:48,947 - INFO - 
=== Summary for Model: intfloat/e5-small-v2 (Sequential Embedding) ===
2025-05-06 16:09:48,947 - INFO - Model Specs:
2025-05-06 16:09:48,947 - INFO -   Parameters: 33,000,000 (~33M)
2025-05-06 16:09:48,947 - INFO -   Embedding Size: 384
2025-05-06 16:09:48,947 - INFO - 
Dataset and Database Statistics:
2025-05-06 16:09:48,947 - INFO - Metric                                   Value               
2025-05-06 16:09:48,947 - INFO - ------------------------------------------------------------
2025-05-06 16:09:48,947 - INFO - HotpotQA Entries                         390                 
2025-05-06 16:09:48,947 - INFO - PubMedQA Entries                         2450                
2025-05-06 16:09:48,947 - INFO - Total Dataset Entries                    2840                
2025-05-06 16:09:48,947 - INFO - HotpotQA Documents                       1557                
2025-05-06 16:09:48,947 - INFO - PubMedQA Documents                       12250               
2025-05-06 16:09:48,947 - INFO - Total Documents                          13807               
2025-05-06 16:09:48,947 - INFO - HotpotQA Size (MB)                       0.73                
2025-05-06 16:09:48,947 - INFO - PubMedQA Size (MB)                       4.31                
2025-05-06 16:09:48,947 - INFO - Total Dataset Size (MB)                  5.04                
2025-05-06 16:09:48,947 - INFO - Documents Stored (Batch)                 13807               
2025-05-06 16:09:48,947 - INFO - Database Entries                         13807               
2025-05-06 16:09:48,948 - INFO - Database Size (MB)                       70.74               
2025-05-06 16:09:48,948 - INFO - Total Queries Evaluated                  2840                
2025-05-06 16:09:48,948 - INFO - Embedding Mode                           sequential          
2025-05-06 16:09:48,948 - INFO - 
Timing Breakdown (Total Time: 1148.13s):
2025-05-06 16:09:48,948 - INFO - Process                                  Time (s)     Proportion (%) 
2025-05-06 16:09:48,948 - INFO - -------------------------------------------------------------------
2025-05-06 16:09:48,948 - INFO - Database Connection                      0.00         0.00           
2025-05-06 16:09:48,948 - INFO - Dataset Loading                          3.16         0.28           
2025-05-06 16:09:48,948 - INFO - Document Collection                      1.12         0.10           
2025-05-06 16:09:48,948 - INFO - Database Clearing                        0.11         0.01           
2025-05-06 16:09:48,948 - INFO - Sequential Embedding                     129.73       11.30          
2025-05-06 16:09:48,948 - INFO - Embedding Generation (Document)          129.73       11.30          
2025-05-06 16:09:48,948 - INFO - Batch Document Storage                   1.02         0.09           
2025-05-06 16:09:48,948 - INFO - Document Indexing                        8.87         0.77           
2025-05-06 16:09:48,948 - INFO - Query Preprocessing (30 candidates)      0.00         0.00           
2025-05-06 16:09:48,948 - INFO - Query Encoding (30 candidates)           339.40       29.56          
2025-05-06 16:09:48,948 - INFO - Vector Similarity Search (30 candidates) 9.52         0.83           
2025-05-06 16:09:48,948 - INFO - Evaluation Overhead (30 candidates)      90.43        7.88           
2025-05-06 16:09:48,948 - INFO - Query Preprocessing (100 candidates)     0.00         0.00           
2025-05-06 16:09:48,948 - INFO - Query Encoding (100 candidates)          332.28       28.94          
2025-05-06 16:09:48,948 - INFO - Vector Similarity Search (100 candidates) 13.25        1.15           
2025-05-06 16:09:48,948 - INFO - Evaluation Overhead (100 candidates)     89.52        7.80           
2025-05-06 16:09:48,948 - INFO - 
Evaluation Metrics (30 candidates):
2025-05-06 16:09:48,948 - INFO -   Latency (s/query): 0.1241
2025-05-06 16:09:48,948 - INFO -   Throughput (q/s): 31.40
2025-05-06 16:09:48,948 - INFO -   Precision (%): 91.90
2025-05-06 16:09:48,948 - INFO - 
Evaluation Metrics (100 candidates):
2025-05-06 16:09:48,948 - INFO -   Latency (s/query): 0.1229
2025-05-06 16:09:48,948 - INFO -   Throughput (q/s): 31.72
2025-05-06 16:09:48,948 - INFO -   Precision (%): 93.66
2025-05-06 16:09:48,948 - INFO - 
=== Summary for Model: intfloat/e5-small-v2 (Batch Embedding) ===
2025-05-06 16:09:48,948 - INFO - Model Specs:
2025-05-06 16:09:48,948 - INFO -   Parameters: 33,000,000 (~33M)
2025-05-06 16:09:48,948 - INFO -   Embedding Size: 384
2025-05-06 16:09:48,948 - INFO - 
Dataset and Database Statistics:
2025-05-06 16:09:48,948 - INFO - Metric                                   Value               
2025-05-06 16:09:48,948 - INFO - ------------------------------------------------------------
2025-05-06 16:09:48,948 - INFO - HotpotQA Entries                         390                 
2025-05-06 16:09:48,948 - INFO - PubMedQA Entries                         2450                
2025-05-06 16:09:48,948 - INFO - Total Dataset Entries                    2840                
2025-05-06 16:09:48,948 - INFO - HotpotQA Documents                       1557                
2025-05-06 16:09:48,948 - INFO - PubMedQA Documents                       12250               
2025-05-06 16:09:48,948 - INFO - Total Documents                          13807               
2025-05-06 16:09:48,948 - INFO - HotpotQA Size (MB)                       0.73                
2025-05-06 16:09:48,948 - INFO - PubMedQA Size (MB)                       4.31                
2025-05-06 16:09:48,948 - INFO - Total Dataset Size (MB)                  5.04                
2025-05-06 16:09:48,948 - INFO - Documents Stored (Batch)                 13807               
2025-05-06 16:09:48,948 - INFO - Database Entries                         13807               
2025-05-06 16:09:48,949 - INFO - Database Size (MB)                       70.74               
2025-05-06 16:09:48,949 - INFO - Total Queries Evaluated                  2840                
2025-05-06 16:09:48,949 - INFO - Embedding Mode                           batch               
2025-05-06 16:09:48,949 - INFO - 
Timing Breakdown (Total Time: 936.92s):
2025-05-06 16:09:48,949 - INFO - Process                                  Time (s)     Proportion (%) 
2025-05-06 16:09:48,949 - INFO - -------------------------------------------------------------------
2025-05-06 16:09:48,949 - INFO - Database Connection                      0.00         0.00           
2025-05-06 16:09:48,949 - INFO - Dataset Loading                          3.22         0.34           
2025-05-06 16:09:48,949 - INFO - Document Collection                      1.14         0.12           
2025-05-06 16:09:48,949 - INFO - Database Clearing                        0.13         0.01           
2025-05-06 16:09:48,949 - INFO - Batch Embedding                          23.44        2.50           
2025-05-06 16:09:48,949 - INFO - Embedding Generation (Document)          23.44        2.50           
2025-05-06 16:09:48,949 - INFO - Batch Document Storage                   0.95         0.10           
2025-05-06 16:09:48,949 - INFO - Document Indexing                        8.85         0.94           
2025-05-06 16:09:48,949 - INFO - Query Preprocessing (30 candidates)      0.00         0.00           
2025-05-06 16:09:48,949 - INFO - Query Encoding (30 candidates)           340.51       36.34          
2025-05-06 16:09:48,949 - INFO - Vector Similarity Search (30 candidates) 9.35         1.00           
2025-05-06 16:09:48,949 - INFO - Evaluation Overhead (30 candidates)      90.68        9.68           
2025-05-06 16:09:48,949 - INFO - Query Preprocessing (100 candidates)     0.00         0.00           
2025-05-06 16:09:48,949 - INFO - Query Encoding (100 candidates)          331.12       35.34          
2025-05-06 16:09:48,949 - INFO - Vector Similarity Search (100 candidates) 14.52        1.55           
2025-05-06 16:09:48,949 - INFO - Evaluation Overhead (100 candidates)     89.57        9.56           
2025-05-06 16:09:48,949 - INFO - 
Evaluation Metrics (30 candidates):
2025-05-06 16:09:48,949 - INFO -   Latency (s/query): 0.1244
2025-05-06 16:09:48,949 - INFO -   Throughput (q/s): 31.32
2025-05-06 16:09:48,949 - INFO -   Precision (%): 91.42
2025-05-06 16:09:48,949 - INFO - 
Evaluation Metrics (100 candidates):
2025-05-06 16:09:48,949 - INFO -   Latency (s/query): 0.1229
2025-05-06 16:09:48,949 - INFO -   Throughput (q/s): 31.70
2025-05-06 16:09:48,949 - INFO -   Precision (%): 93.62
2025-05-06 16:09:48,949 - INFO - 
=== Evaluating Model: thenlper/gte-base-384 ===
2025-05-06 16:09:48,949 - INFO - Running sequential embedding mode
2025-05-06 16:09:48,951 - INFO - Use pytorch device_name: cuda:0
2025-05-06 16:09:48,951 - INFO - Load pretrained SentenceTransformer: thenlper/gte-base
2025-05-06 16:09:54,040 - INFO - Loading HotpotQA dataset with split: test
2025-05-06 16:09:55,868 - INFO - Loading PubMedQA dataset with split: test
2025-05-06 16:09:57,402 - INFO - Dataset Loading Duration: 3.36s
2025-05-06 16:09:58,445 - INFO - HotpotQA Test Split: 390 entries, 1557 docs, 0.73 MB
2025-05-06 16:09:58,445 - INFO - PubMedQA Test Split: 2450 entries, 12250 docs, 4.31 MB
2025-05-06 16:09:58,445 - INFO - Combined Dataset: 2840 entries, 13807 docs, 5.04 MB
2025-05-06 16:09:59,574 - INFO - Document Collection Duration: 1.13s
2025-05-06 16:09:59,574 - INFO - Total Documents to Embed: 13807
2025-05-06 16:09:59,574 - INFO - Using sequential embedding mode
2025-05-06 16:12:09,039 - INFO - Sequential Embedding Duration: 129.46s
2025-05-06 16:12:09,039 - INFO - Total Query Preprocessing: 0.00s
2025-05-06 16:12:09,039 - INFO - Total Query Encoding: 127.10s
2025-05-06 16:12:09,043 - INFO - Average Embedding Norm: 0.5495 ± 0.0108
Embedding Generation - Duration: 129.47s, CPU Time Delta: 129.43s, CPU: 0.00%, Memory: 3717.11 MB
2025-05-06 16:12:10,044 - INFO - Attempting to connect to MongoDB at mongodb://localhost:32768/?directConnection=true (Attempt 1/5)
2025-05-06 16:12:10,048 - INFO - Connected to MongoDB successfully!
2025-05-06 16:12:10,160 - INFO - Database Clearing Duration: 0.11s
2025-05-06 16:12:10,160 - INFO - Inserting documents in batch into MongoDB
2025-05-06 16:12:11,256 - INFO - Batch Document Storage Duration: 1.10s
2025-05-06 16:12:11,257 - INFO - Setting up vector index
2025-05-06 16:12:13,627 - INFO - Existing 'vector_index' dropped.
2025-05-06 16:12:13,651 - INFO - Waiting for vector index to be ready...
2025-05-06 16:12:20,265 - INFO - Vector index is now ready!
2025-05-06 16:12:20,265 - INFO - Document Indexing Duration: 9.01s
Embedding and Storage - Duration: 10.22s, CPU Time Delta: 0.69s, CPU: 0.00%, Memory: 3717.62 MB
After Index Setup - CPU: 0.00%, CPU Time: 10003.99s, Memory: 3717.62 MB
2025-05-06 16:12:22,275 - INFO - Stored 13807 documents in batch, 13807 entries in MongoDB.
Data Load (sequential) - Duration: 148.29s, CPU Time Delta: 132.61s, CPU: 0.00%, Memory: 3662.90 MB
2025-05-06 16:12:23,335 - INFO - 
Running evaluation (30 candidates, sequential)...
2025-05-06 16:12:23,335 - INFO - Starting evaluation with 2840 queries, 4 workers, 30 candidates
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.22s/it][A
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.23s/it]
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.26s/it]
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.26s/it]
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.30s/it][A[A
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.32s/it]
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.26s/it][A[A[A
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.26s/it]
2025-05-06 16:13:54,078 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 16:13:54,078 - INFO - Database Size: 70.74 MB (13807 documents)
2025-05-06 16:13:54,078 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 16:13:54,078 - INFO - Average Precision: 95.19% (8110/8520 docs)
2025-05-06 16:13:54,078 - INFO - Average Latency: 0.1244 seconds/query
2025-05-06 16:13:54,078 - INFO - Throughput: 31.30 queries/second (with 4 workers, 30 candidates)
Evaluation (30 candidates, sequential) - Duration: 90.75s, CPU Time Delta: 131.21s, CPU: 0.00%, Memory: 3662.96 MB
2025-05-06 16:13:55,086 - INFO - 
Running evaluation (100 candidates, sequential)...
2025-05-06 16:13:55,087 - INFO - Starting evaluation with 2840 queries, 4 workers, 100 candidates
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.20s/it]
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.20s/it]
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.15s/it][A[A
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.15s/it]
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.24s/it][A
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.24s/it]
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.31s/it][A[A[A
Batches: 100%|██████████| 1/1 [00:01<00:00,  1.32s/it]
2025-05-06 16:15:25,185 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 16:15:25,185 - INFO - Database Size: 70.74 MB (13807 documents)
2025-05-06 16:15:25,185 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 16:15:25,185 - INFO - Average Precision: 95.23% (8114/8520 docs)
2025-05-06 16:15:25,185 - INFO - Average Latency: 0.1235 seconds/query
2025-05-06 16:15:25,185 - INFO - Throughput: 31.52 queries/second (with 4 workers, 100 candidates)
Evaluation (100 candidates, sequential) - Duration: 90.11s, CPU Time Delta: 129.64s, CPU: 0.00%, Memory: 3662.98 MB
2025-05-06 16:15:26,194 - INFO - Running batch embedding mode
2025-05-06 16:15:26,196 - INFO - Use pytorch device_name: cuda:0
2025-05-06 16:15:26,196 - INFO - Load pretrained SentenceTransformer: thenlper/gte-base
2025-05-06 16:15:28,232 - INFO - Loading HotpotQA dataset with split: test
2025-05-06 16:15:30,395 - INFO - Loading PubMedQA dataset with split: test
2025-05-06 16:15:32,025 - INFO - Dataset Loading Duration: 3.79s
2025-05-06 16:15:33,059 - INFO - HotpotQA Test Split: 390 entries, 1557 docs, 0.73 MB
2025-05-06 16:15:33,060 - INFO - PubMedQA Test Split: 2450 entries, 12250 docs, 4.31 MB
2025-05-06 16:15:33,060 - INFO - Combined Dataset: 2840 entries, 13807 docs, 5.04 MB
2025-05-06 16:15:34,182 - INFO - Document Collection Duration: 1.12s
2025-05-06 16:15:34,182 - INFO - Total Documents to Embed: 13807
2025-05-06 16:15:34,182 - INFO - Using batch embedding mode
2025-05-06 16:16:15,875 - INFO - Batch Embedding Duration: 41.69s
2025-05-06 16:16:15,875 - INFO - Total Query Preprocessing: 0.00s
2025-05-06 16:16:15,875 - INFO - Total Query Encoding: 20.09s
2025-05-06 16:16:15,877 - INFO - Average Embedding Norm: 0.5739 ± 0.0107
Embedding Generation - Duration: 41.70s, CPU Time Delta: 45.44s, CPU: 0.00%, Memory: 3738.80 MB
2025-05-06 16:16:16,879 - INFO - Attempting to connect to MongoDB at mongodb://localhost:32768/?directConnection=true (Attempt 1/5)
2025-05-06 16:16:16,883 - INFO - Connected to MongoDB successfully!
2025-05-06 16:16:16,996 - INFO - Database Clearing Duration: 0.11s
2025-05-06 16:16:16,996 - INFO - Inserting documents in batch into MongoDB
2025-05-06 16:16:17,929 - INFO - Batch Document Storage Duration: 0.93s
2025-05-06 16:16:17,929 - INFO - Setting up vector index
2025-05-06 16:16:20,218 - INFO - Existing 'vector_index' dropped.
2025-05-06 16:16:20,241 - INFO - Waiting for vector index to be ready...
2025-05-06 16:16:26,862 - INFO - Vector index is now ready!
2025-05-06 16:16:26,862 - INFO - Document Indexing Duration: 8.93s
Embedding and Storage - Duration: 9.98s, CPU Time Delta: 0.50s, CPU: 0.00%, Memory: 3739.96 MB
After Index Setup - CPU: 0.00%, CPU Time: 10313.54s, Memory: 3739.96 MB
2025-05-06 16:16:28,871 - INFO - Stored 13807 documents in batch, 13807 entries in MongoDB.
Data Load (batch) - Duration: 60.70s, CPU Time Delta: 48.42s, CPU: 2.00%, Memory: 3670.31 MB
2025-05-06 16:16:29,935 - INFO - 
Running evaluation (30 candidates, batch)...
2025-05-06 16:16:29,935 - INFO - Starting evaluation with 2840 queries, 4 workers, 30 candidates

2025-05-06 16:18:01,233 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 16:18:01,233 - INFO - Database Size: 70.74 MB (13807 documents)
2025-05-06 16:18:01,233 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 16:18:01,233 - INFO - Average Precision: 95.53% (8139/8520 docs)
2025-05-06 16:18:01,233 - INFO - Average Latency: 0.1252 seconds/query
2025-05-06 16:18:01,233 - INFO - Throughput: 31.11 queries/second (with 4 workers, 30 candidates)
Evaluation (30 candidates, batch) - Duration: 91.31s, CPU Time Delta: 131.67s, CPU: 0.00%, Memory: 3664.44 MB
2025-05-06 16:18:02,242 - INFO - 
Running evaluation (100 candidates, batch)...
2025-05-06 16:18:02,243 - INFO - Starting evaluation with 2840 queries, 4 workers, 100 candidates
2025-05-06 16:19:32,966 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 16:19:32,966 - INFO - Database Size: 70.74 MB (13807 documents)
2025-05-06 16:19:32,966 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 16:19:32,966 - INFO - Average Precision: 95.60% (8145/8520 docs)
2025-05-06 16:19:32,967 - INFO - Average Latency: 0.1243 seconds/query
2025-05-06 16:19:32,967 - INFO - Throughput: 31.31 queries/second (with 4 workers, 100 candidates)
Evaluation (100 candidates, batch) - Duration: 90.73s, CPU Time Delta: 130.17s, CPU: 0.00%, Memory: 3664.49 MB
2025-05-06 16:19:33,976 - INFO - 
=== Summary for Model: thenlper/gte-base-384 (Sequential Embedding) ===
2025-05-06 16:19:33,977 - INFO - Model Specs:
2025-05-06 16:19:33,977 - INFO -   Parameters: 110,000,000 (~110M)
2025-05-06 16:19:33,977 - INFO -   Embedding Size: 384
2025-05-06 16:19:33,977 - INFO - 
Dataset and Database Statistics:
2025-05-06 16:19:33,977 - INFO - Metric                                   Value               
2025-05-06 16:19:33,977 - INFO - ------------------------------------------------------------
2025-05-06 16:19:33,977 - INFO - HotpotQA Entries                         390                 
2025-05-06 16:19:33,977 - INFO - PubMedQA Entries                         2450                
2025-05-06 16:19:33,977 - INFO - Total Dataset Entries                    2840                
2025-05-06 16:19:33,977 - INFO - HotpotQA Documents                       1557                
2025-05-06 16:19:33,977 - INFO - PubMedQA Documents                       12250               
2025-05-06 16:19:33,977 - INFO - Total Documents                          13807               
2025-05-06 16:19:33,977 - INFO - HotpotQA Size (MB)                       0.73                
2025-05-06 16:19:33,977 - INFO - PubMedQA Size (MB)                       4.31                
2025-05-06 16:19:33,977 - INFO - Total Dataset Size (MB)                  5.04                
2025-05-06 16:19:33,977 - INFO - Documents Stored (Batch)                 13807               
2025-05-06 16:19:33,977 - INFO - Database Entries                         13807               
2025-05-06 16:19:33,977 - INFO - Database Size (MB)                       70.74               
2025-05-06 16:19:33,977 - INFO - Total Queries Evaluated                  2840                
2025-05-06 16:19:33,977 - INFO - Embedding Mode                           sequential          
2025-05-06 16:19:33,977 - INFO - 
Timing Breakdown (Total Time: 1147.44s):
2025-05-06 16:19:33,977 - INFO - Process                                  Time (s)     Proportion (%) 
2025-05-06 16:19:33,977 - INFO - -------------------------------------------------------------------
2025-05-06 16:19:33,977 - INFO - Database Connection                      0.00         0.00           
2025-05-06 16:19:33,977 - INFO - Dataset Loading                          3.36         0.29           
2025-05-06 16:19:33,977 - INFO - Document Collection                      1.13         0.10           
2025-05-06 16:19:33,977 - INFO - Database Clearing                        0.11         0.01           
2025-05-06 16:19:33,977 - INFO - Sequential Embedding                     129.46       11.28          
2025-05-06 16:19:33,977 - INFO - Embedding Generation (Document)          129.47       11.28          
2025-05-06 16:19:33,977 - INFO - Batch Document Storage                   1.10         0.10           
2025-05-06 16:19:33,977 - INFO - Document Indexing                        9.01         0.79           
2025-05-06 16:19:33,977 - INFO - Query Preprocessing (30 candidates)      0.00         0.00           
2025-05-06 16:19:33,977 - INFO - Query Encoding (30 candidates)           338.60       29.51          
2025-05-06 16:19:33,977 - INFO - Vector Similarity Search (30 candidates) 9.25         0.81           
2025-05-06 16:19:33,977 - INFO - Evaluation Overhead (30 candidates)      90.73        7.91           
2025-05-06 16:19:33,977 - INFO - Query Preprocessing (100 candidates)     0.00         0.00           
2025-05-06 16:19:33,977 - INFO - Query Encoding (100 candidates)          330.55       28.81          
2025-05-06 16:19:33,977 - INFO - Vector Similarity Search (100 candidates) 14.58        1.27           
2025-05-06 16:19:33,977 - INFO - Evaluation Overhead (100 candidates)     90.08        7.85           
2025-05-06 16:19:33,977 - INFO - 
Evaluation Metrics (30 candidates):
2025-05-06 16:19:33,977 - INFO -   Latency (s/query): 0.1244
2025-05-06 16:19:33,977 - INFO -   Throughput (q/s): 31.30
2025-05-06 16:19:33,977 - INFO -   Precision (%): 95.19
2025-05-06 16:19:33,977 - INFO - 
Evaluation Metrics (100 candidates):
2025-05-06 16:19:33,977 - INFO -   Latency (s/query): 0.1235
2025-05-06 16:19:33,977 - INFO -   Throughput (q/s): 31.52
2025-05-06 16:19:33,977 - INFO -   Precision (%): 95.23
2025-05-06 16:19:33,977 - INFO - 
=== Summary for Model: thenlper/gte-base-384 (Batch Embedding) ===
2025-05-06 16:19:33,977 - INFO - Model Specs:
2025-05-06 16:19:33,978 - INFO -   Parameters: 110,000,000 (~110M)
2025-05-06 16:19:33,978 - INFO -   Embedding Size: 384
2025-05-06 16:19:33,978 - INFO - 
Dataset and Database Statistics:
2025-05-06 16:19:33,978 - INFO - Metric                                   Value               
2025-05-06 16:19:33,978 - INFO - ------------------------------------------------------------
2025-05-06 16:19:33,978 - INFO - HotpotQA Entries                         390                 
2025-05-06 16:19:33,978 - INFO - PubMedQA Entries                         2450                
2025-05-06 16:19:33,978 - INFO - Total Dataset Entries                    2840                
2025-05-06 16:19:33,978 - INFO - HotpotQA Documents                       1557                
2025-05-06 16:19:33,978 - INFO - PubMedQA Documents                       12250               
2025-05-06 16:19:33,978 - INFO - Total Documents                          13807               
2025-05-06 16:19:33,978 - INFO - HotpotQA Size (MB)                       0.73                
2025-05-06 16:19:33,978 - INFO - PubMedQA Size (MB)                       4.31                
2025-05-06 16:19:33,978 - INFO - Total Dataset Size (MB)                  5.04                
2025-05-06 16:19:33,978 - INFO - Documents Stored (Batch)                 13807               
2025-05-06 16:19:33,978 - INFO - Database Entries                         13807               
2025-05-06 16:19:33,978 - INFO - Database Size (MB)                       70.74               
2025-05-06 16:19:33,978 - INFO - Total Queries Evaluated                  2840                
2025-05-06 16:19:33,978 - INFO - Embedding Mode                           batch               
2025-05-06 16:19:33,978 - INFO - 
Timing Breakdown (Total Time: 977.82s):
2025-05-06 16:19:33,978 - INFO - Process                                  Time (s)     Proportion (%) 
2025-05-06 16:19:33,978 - INFO - -------------------------------------------------------------------
2025-05-06 16:19:33,978 - INFO - Database Connection                      0.00         0.00           
2025-05-06 16:19:33,978 - INFO - Dataset Loading                          3.79         0.39           
2025-05-06 16:19:33,978 - INFO - Document Collection                      1.12         0.11           
2025-05-06 16:19:33,978 - INFO - Database Clearing                        0.11         0.01           
2025-05-06 16:19:33,978 - INFO - Batch Embedding                          41.69        4.26           
2025-05-06 16:19:33,978 - INFO - Embedding Generation (Document)          41.70        4.26           
2025-05-06 16:19:33,978 - INFO - Batch Document Storage                   0.93         0.10           
2025-05-06 16:19:33,978 - INFO - Document Indexing                        8.93         0.91           
2025-05-06 16:19:33,978 - INFO - Query Preprocessing (30 candidates)      0.00         0.00           
2025-05-06 16:19:33,978 - INFO - Query Encoding (30 candidates)           340.35       34.81          
2025-05-06 16:19:33,978 - INFO - Vector Similarity Search (30 candidates) 9.57         0.98           
2025-05-06 16:19:33,978 - INFO - Evaluation Overhead (30 candidates)      91.28        9.34           
2025-05-06 16:19:33,978 - INFO - Query Preprocessing (100 candidates)     0.00         0.00           
2025-05-06 16:19:33,978 - INFO - Query Encoding (100 candidates)          334.08       34.17          
2025-05-06 16:19:33,978 - INFO - Vector Similarity Search (100 candidates) 13.55        1.39           
2025-05-06 16:19:33,978 - INFO - Evaluation Overhead (100 candidates)     90.71        9.28           
2025-05-06 16:19:33,978 - INFO - 
Evaluation Metrics (30 candidates):
2025-05-06 16:19:33,978 - INFO -   Latency (s/query): 0.1252
2025-05-06 16:19:33,978 - INFO -   Throughput (q/s): 31.11
2025-05-06 16:19:33,978 - INFO -   Precision (%): 95.53
2025-05-06 16:19:33,978 - INFO - 
Evaluation Metrics (100 candidates):
2025-05-06 16:19:33,978 - INFO -   Latency (s/query): 0.1243
2025-05-06 16:19:33,978 - INFO -   Throughput (q/s): 31.31
2025-05-06 16:19:33,978 - INFO -   Precision (%): 95.60
2025-05-06 16:19:33,978 - INFO - 
=== Evaluating Model: sentence-transformers/all-mpnet-base-v2 ===
2025-05-06 16:19:33,978 - INFO - Running sequential embedding mode
2025-05-06 16:19:33,980 - INFO - Use pytorch device_name: cuda:0
2025-05-06 16:19:33,980 - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-mpnet-base-v2
Xet Storage is enabled for this repo, but the 'hf_xet' package is not installed. Falling back to regular HTTP download. For better performance, install the package with: `pip install huggingface_hub[hf_xet]` or `pip install hf_xet`
2025-05-06 16:19:35,732 - WARNING - Xet Storage is enabled for this repo, but the 'hf_xet' package is not installed. Falling back to regular HTTP download. For better performance, install the package with: `pip install huggingface_hub[hf_xet]` or `pip install hf_xet`
2025-05-06 16:19:39,182 - INFO - Loading HotpotQA dataset with split: test
2025-05-06 16:19:41,179 - INFO - Loading PubMedQA dataset with split: test
2025-05-06 16:19:42,743 - INFO - Dataset Loading Duration: 3.56s
2025-05-06 16:19:43,779 - INFO - HotpotQA Test Split: 390 entries, 1557 docs, 0.73 MB
2025-05-06 16:19:43,779 - INFO - PubMedQA Test Split: 2450 entries, 12250 docs, 4.31 MB
2025-05-06 16:19:43,779 - INFO - Combined Dataset: 2840 entries, 13807 docs, 5.04 MB
2025-05-06 16:19:44,897 - INFO - Document Collection Duration: 1.12s
2025-05-06 16:19:44,897 - INFO - Total Documents to Embed: 13807
2025-05-06 16:19:44,897 - INFO - Using sequential embedding mode
2025-05-06 16:22:15,291 - INFO - Sequential Embedding Duration: 150.39s
2025-05-06 16:22:15,291 - INFO - Total Query Preprocessing: 0.00s
2025-05-06 16:22:15,291 - INFO - Total Query Encoding: 148.40s
2025-05-06 16:22:15,295 - INFO - Average Embedding Norm: 1.0000 ± 0.0000
Embedding Generation - Duration: 150.40s, CPU Time Delta: 212.08s, CPU: 0.00%, Memory: 3886.52 MB
2025-05-06 16:22:16,296 - INFO - Attempting to connect to MongoDB at mongodb://localhost:32768/?directConnection=true (Attempt 1/5)
2025-05-06 16:22:16,300 - INFO - Connected to MongoDB successfully!
2025-05-06 16:22:16,413 - INFO - Database Clearing Duration: 0.11s
2025-05-06 16:22:16,413 - INFO - Inserting documents in batch into MongoDB
2025-05-06 16:22:18,429 - INFO - Batch Document Storage Duration: 2.02s
2025-05-06 16:22:18,429 - INFO - Setting up vector index
2025-05-06 16:22:18,533 - INFO - Existing 'vector_index' dropped.
2025-05-06 16:22:18,546 - INFO - Waiting for vector index to be ready...
2025-05-06 16:22:28,964 - INFO - Vector index is now ready!
2025-05-06 16:22:28,964 - INFO - Document Indexing Duration: 10.54s
Embedding and Storage - Duration: 12.67s, CPU Time Delta: 1.17s, CPU: 0.00%, Memory: 3886.52 MB
After Index Setup - CPU: 0.00%, CPU Time: 10792.25s, Memory: 3886.52 MB
2025-05-06 16:22:30,976 - INFO - Stored 13807 documents in batch, 13807 entries in MongoDB.
Data Load (sequential) - Duration: 171.90s, CPU Time Delta: 215.77s, CPU: 0.00%, Memory: 3672.39 MB
2025-05-06 16:22:32,086 - INFO - 
Running evaluation (30 candidates, sequential)...
2025-05-06 16:22:32,086 - INFO - Starting evaluation with 2840 queries, 4 workers, 30 candidates

2025-05-06 16:24:10,740 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 16:24:10,740 - INFO - Database Size: 136.48 MB (13807 documents)
2025-05-06 16:24:10,740 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 16:24:10,740 - INFO - Average Precision: 94.08% (8016/8520 docs)
2025-05-06 16:24:10,740 - INFO - Average Latency: 0.1355 seconds/query
2025-05-06 16:24:10,740 - INFO - Throughput: 28.79 queries/second (with 4 workers, 30 candidates)
Evaluation (30 candidates, sequential) - Duration: 98.66s, CPU Time Delta: 148.83s, CPU: 0.00%, Memory: 3670.03 MB
2025-05-06 16:24:11,748 - INFO - 
Running evaluation (100 candidates, sequential)...
2025-05-06 16:24:11,749 - INFO - Starting evaluation with 2840 queries, 4 workers, 100 candidates
2025-05-06 16:25:49,207 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 16:25:49,207 - INFO - Database Size: 136.48 MB (13807 documents)
2025-05-06 16:25:49,207 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 16:25:49,207 - INFO - Average Precision: 94.39% (8042/8520 docs)
2025-05-06 16:25:49,207 - INFO - Average Latency: 0.1337 seconds/query
2025-05-06 16:25:49,207 - INFO - Throughput: 29.15 queries/second (with 4 workers, 100 candidates)
Evaluation (100 candidates, sequential) - Duration: 97.47s, CPU Time Delta: 146.26s, CPU: 0.00%, Memory: 3673.06 MB
2025-05-06 16:25:50,216 - INFO - Running batch embedding mode
2025-05-06 16:25:50,218 - INFO - Use pytorch device_name: cuda:0
2025-05-06 16:25:50,218 - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-mpnet-base-v2
2025-05-06 16:25:51,633 - INFO - Loading HotpotQA dataset with split: test
2025-05-06 16:25:53,490 - INFO - Loading PubMedQA dataset with split: test
2025-05-06 16:25:55,097 - INFO - Dataset Loading Duration: 3.46s
2025-05-06 16:25:56,164 - INFO - HotpotQA Test Split: 390 entries, 1557 docs, 0.73 MB
2025-05-06 16:25:56,164 - INFO - PubMedQA Test Split: 2450 entries, 12250 docs, 4.31 MB
2025-05-06 16:25:56,164 - INFO - Combined Dataset: 2840 entries, 13807 docs, 5.04 MB
2025-05-06 16:25:57,294 - INFO - Document Collection Duration: 1.13s
2025-05-06 16:25:57,294 - INFO - Total Documents to Embed: 13807
2025-05-06 16:25:57,294 - INFO - Using batch embedding mode
2025-05-06 16:26:45,501 - INFO - Batch Embedding Duration: 48.21s
2025-05-06 16:26:45,501 - INFO - Total Query Preprocessing: 0.00s
2025-05-06 16:26:45,501 - INFO - Total Query Encoding: 23.04s
2025-05-06 16:26:45,502 - INFO - Average Embedding Norm: 1.0000 ± 0.0000
Embedding Generation - Duration: 48.21s, CPU Time Delta: 63.02s, CPU: 0.00%, Memory: 3911.42 MB
2025-05-06 16:26:46,504 - INFO - Attempting to connect to MongoDB at mongodb://localhost:32768/?directConnection=true (Attempt 1/5)
2025-05-06 16:26:46,508 - INFO - Connected to MongoDB successfully!
2025-05-06 16:26:46,639 - INFO - Database Clearing Duration: 0.13s
2025-05-06 16:26:46,639 - INFO - Inserting documents in batch into MongoDB
2025-05-06 16:26:48,619 - INFO - Batch Document Storage Duration: 1.98s
2025-05-06 16:26:48,619 - INFO - Setting up vector index
2025-05-06 16:26:50,280 - INFO - Existing 'vector_index' dropped.
2025-05-06 16:26:50,303 - INFO - Waiting for vector index to be ready...
2025-05-06 16:27:00,717 - INFO - Vector index is now ready!
2025-05-06 16:27:00,717 - INFO - Document Indexing Duration: 12.10s
Embedding and Storage - Duration: 14.21s, CPU Time Delta: 0.99s, CPU: 0.00%, Memory: 3912.49 MB
After Index Setup - CPU: 0.00%, CPU Time: 11154.13s, Memory: 3912.49 MB
2025-05-06 16:27:02,728 - INFO - Stored 13807 documents in batch, 13807 entries in MongoDB.
Data Load (batch) - Duration: 71.20s, CPU Time Delta: 66.57s, CPU: 0.00%, Memory: 3686.22 MB
2025-05-06 16:27:03,837 - INFO - 
Running evaluation (30 candidates, batch)...
2025-05-06 16:27:03,837 - INFO - Starting evaluation with 2840 queries, 4 workers, 30 candidates
2025-05-06 16:28:42,251 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 16:28:42,251 - INFO - Database Size: 136.48 MB (13807 documents)
2025-05-06 16:28:42,251 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 16:28:42,251 - INFO - Average Precision: 94.06% (8014/8520 docs)
2025-05-06 16:28:42,251 - INFO - Average Latency: 0.1351 seconds/query
2025-05-06 16:28:42,251 - INFO - Throughput: 28.86 queries/second (with 4 workers, 30 candidates)
Evaluation (30 candidates, batch) - Duration: 98.42s, CPU Time Delta: 148.47s, CPU: 0.00%, Memory: 3677.50 MB
2025-05-06 16:28:43,261 - INFO - 
Running evaluation (100 candidates, batch)...
2025-05-06 16:28:43,261 - INFO - Starting evaluation with 2840 queries, 4 workers, 100 candidates
2025-05-06 16:30:20,868 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 16:30:20,868 - INFO - Database Size: 136.48 MB (13807 documents)
2025-05-06 16:30:20,868 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 16:30:20,868 - INFO - Average Precision: 94.38% (8041/8520 docs)
2025-05-06 16:30:20,868 - INFO - Average Latency: 0.1339 seconds/query
2025-05-06 16:30:20,868 - INFO - Throughput: 29.10 queries/second (with 4 workers, 100 candidates)
Evaluation (100 candidates, batch) - Duration: 97.61s, CPU Time Delta: 146.35s, CPU: 0.00%, Memory: 3677.60 MB
2025-05-06 16:30:21,878 - INFO - 
=== Summary for Model: sentence-transformers/all-mpnet-base-v2 (Sequential Embedding) ===
2025-05-06 16:30:21,878 - INFO - Model Specs:
2025-05-06 16:30:21,878 - INFO -   Parameters: 110,000,000 (~110M)
2025-05-06 16:30:21,878 - INFO -   Embedding Size: 768
2025-05-06 16:30:21,878 - INFO - 
Dataset and Database Statistics:
2025-05-06 16:30:21,878 - INFO - Metric                                   Value               
2025-05-06 16:30:21,878 - INFO - ------------------------------------------------------------
2025-05-06 16:30:21,878 - INFO - HotpotQA Entries                         390                 
2025-05-06 16:30:21,878 - INFO - PubMedQA Entries                         2450                
2025-05-06 16:30:21,878 - INFO - Total Dataset Entries                    2840                
2025-05-06 16:30:21,878 - INFO - HotpotQA Documents                       1557                
2025-05-06 16:30:21,878 - INFO - PubMedQA Documents                       12250               
2025-05-06 16:30:21,878 - INFO - Total Documents                          13807               
2025-05-06 16:30:21,878 - INFO - HotpotQA Size (MB)                       0.73                
2025-05-06 16:30:21,879 - INFO - PubMedQA Size (MB)                       4.31                
2025-05-06 16:30:21,879 - INFO - Total Dataset Size (MB)                  5.04                
2025-05-06 16:30:21,879 - INFO - Documents Stored (Batch)                 13807               
2025-05-06 16:30:21,879 - INFO - Database Entries                         13807               
2025-05-06 16:30:21,879 - INFO - Database Size (MB)                       136.48              
2025-05-06 16:30:21,879 - INFO - Total Queries Evaluated                  2840                
2025-05-06 16:30:21,879 - INFO - Embedding Mode                           sequential          
2025-05-06 16:30:21,879 - INFO - 
Timing Breakdown (Total Time: 1272.26s):
2025-05-06 16:30:21,879 - INFO - Process                                  Time (s)     Proportion (%) 
2025-05-06 16:30:21,879 - INFO - -------------------------------------------------------------------
2025-05-06 16:30:21,879 - INFO - Database Connection                      0.00         0.00           
2025-05-06 16:30:21,879 - INFO - Dataset Loading                          3.56         0.28           
2025-05-06 16:30:21,879 - INFO - Document Collection                      1.12         0.09           
2025-05-06 16:30:21,879 - INFO - Database Clearing                        0.11         0.01           
2025-05-06 16:30:21,879 - INFO - Sequential Embedding                     150.39       11.82          
2025-05-06 16:30:21,879 - INFO - Embedding Generation (Document)          150.40       11.82          
2025-05-06 16:30:21,879 - INFO - Batch Document Storage                   2.02         0.16           
2025-05-06 16:30:21,879 - INFO - Document Indexing                        10.54        0.83           
2025-05-06 16:30:21,879 - INFO - Query Preprocessing (30 candidates)      0.00         0.00           
2025-05-06 16:30:21,879 - INFO - Query Encoding (30 candidates)           369.00       29.00          
2025-05-06 16:30:21,879 - INFO - Vector Similarity Search (30 candidates) 12.55        0.99           
2025-05-06 16:30:21,879 - INFO - Evaluation Overhead (30 candidates)      98.64        7.75           
2025-05-06 16:30:21,879 - INFO - Query Preprocessing (100 candidates)     0.00         0.00           
2025-05-06 16:30:21,879 - INFO - Query Encoding (100 candidates)          354.48       27.86          
2025-05-06 16:30:21,879 - INFO - Vector Similarity Search (100 candidates) 22.02        1.73           
2025-05-06 16:30:21,879 - INFO - Evaluation Overhead (100 candidates)     97.44        7.66           
2025-05-06 16:30:21,879 - INFO - 
Evaluation Metrics (30 candidates):
2025-05-06 16:30:21,879 - INFO -   Latency (s/query): 0.1355
2025-05-06 16:30:21,879 - INFO -   Throughput (q/s): 28.79
2025-05-06 16:30:21,879 - INFO -   Precision (%): 94.08
2025-05-06 16:30:21,879 - INFO - 
Evaluation Metrics (100 candidates):
2025-05-06 16:30:21,879 - INFO -   Latency (s/query): 0.1337
2025-05-06 16:30:21,879 - INFO -   Throughput (q/s): 29.15
2025-05-06 16:30:21,879 - INFO -   Precision (%): 94.39
2025-05-06 16:30:21,879 - INFO - 
=== Summary for Model: sentence-transformers/all-mpnet-base-v2 (Batch Embedding) ===
2025-05-06 16:30:21,879 - INFO - Model Specs:
2025-05-06 16:30:21,879 - INFO -   Parameters: 110,000,000 (~110M)
2025-05-06 16:30:21,879 - INFO -   Embedding Size: 768
2025-05-06 16:30:21,879 - INFO - 
Dataset and Database Statistics:
2025-05-06 16:30:21,879 - INFO - Metric                                   Value               
2025-05-06 16:30:21,879 - INFO - ------------------------------------------------------------
2025-05-06 16:30:21,879 - INFO - HotpotQA Entries                         390                 
2025-05-06 16:30:21,879 - INFO - PubMedQA Entries                         2450                
2025-05-06 16:30:21,879 - INFO - Total Dataset Entries                    2840                
2025-05-06 16:30:21,879 - INFO - HotpotQA Documents                       1557                
2025-05-06 16:30:21,879 - INFO - PubMedQA Documents                       12250               
2025-05-06 16:30:21,879 - INFO - Total Documents                          13807               
2025-05-06 16:30:21,879 - INFO - HotpotQA Size (MB)                       0.73                
2025-05-06 16:30:21,879 - INFO - PubMedQA Size (MB)                       4.31                
2025-05-06 16:30:21,879 - INFO - Total Dataset Size (MB)                  5.04                
2025-05-06 16:30:21,879 - INFO - Documents Stored (Batch)                 13807               
2025-05-06 16:30:21,879 - INFO - Database Entries                         13807               
2025-05-06 16:30:21,879 - INFO - Database Size (MB)                       136.48              
2025-05-06 16:30:21,879 - INFO - Total Queries Evaluated                  2840                
2025-05-06 16:30:21,879 - INFO - Embedding Mode                           batch               
2025-05-06 16:30:21,880 - INFO - 
Timing Breakdown (Total Time: 1069.13s):
2025-05-06 16:30:21,880 - INFO - Process                                  Time (s)     Proportion (%) 
2025-05-06 16:30:21,880 - INFO - -------------------------------------------------------------------
2025-05-06 16:30:21,880 - INFO - Database Connection                      0.00         0.00           
2025-05-06 16:30:21,880 - INFO - Dataset Loading                          3.46         0.32           
2025-05-06 16:30:21,880 - INFO - Document Collection                      1.13         0.11           
2025-05-06 16:30:21,880 - INFO - Database Clearing                        0.13         0.01           
2025-05-06 16:30:21,880 - INFO - Batch Embedding                          48.21        4.51           
2025-05-06 16:30:21,880 - INFO - Embedding Generation (Document)          48.21        4.51           
2025-05-06 16:30:21,880 - INFO - Batch Document Storage                   1.98         0.19           
2025-05-06 16:30:21,880 - INFO - Document Indexing                        12.10        1.13           
2025-05-06 16:30:21,880 - INFO - Query Preprocessing (30 candidates)      0.00         0.00           
2025-05-06 16:30:21,880 - INFO - Query Encoding (30 candidates)           367.59       34.38          
2025-05-06 16:30:21,880 - INFO - Vector Similarity Search (30 candidates) 13.10        1.23           
2025-05-06 16:30:21,880 - INFO - Evaluation Overhead (30 candidates)      98.40        9.20           
2025-05-06 16:30:21,880 - INFO - Query Preprocessing (100 candidates)     0.00         0.00           
2025-05-06 16:30:21,880 - INFO - Query Encoding (100 candidates)          356.86       33.38          
2025-05-06 16:30:21,880 - INFO - Vector Similarity Search (100 candidates) 20.38        1.91           
2025-05-06 16:30:21,880 - INFO - Evaluation Overhead (100 candidates)     97.59        9.13           
2025-05-06 16:30:21,880 - INFO - 
Evaluation Metrics (30 candidates):
2025-05-06 16:30:21,880 - INFO -   Latency (s/query): 0.1351
2025-05-06 16:30:21,880 - INFO -   Throughput (q/s): 28.86
2025-05-06 16:30:21,880 - INFO -   Precision (%): 94.06
2025-05-06 16:30:21,880 - INFO - 
Evaluation Metrics (100 candidates):
2025-05-06 16:30:21,880 - INFO -   Latency (s/query): 0.1339
2025-05-06 16:30:21,880 - INFO -   Throughput (q/s): 29.10
2025-05-06 16:30:21,880 - INFO -   Precision (%): 94.38
2025-05-06 16:30:21,880 - INFO - 
=== Evaluating Model: BAAI/bge-base-en-v1.5 ===
2025-05-06 16:30:21,880 - INFO - Running sequential embedding mode
2025-05-06 16:30:21,882 - INFO - Use pytorch device_name: cuda:0
2025-05-06 16:30:21,882 - INFO - Load pretrained SentenceTransformer: BAAI/bge-base-en-v1.5
2025-05-06 16:30:27,093 - INFO - Loading HotpotQA dataset with split: test
2025-05-06 16:30:29,272 - INFO - Loading PubMedQA dataset with split: test
2025-05-06 16:30:31,767 - INFO - Dataset Loading Duration: 4.67s
2025-05-06 16:30:32,802 - INFO - HotpotQA Test Split: 390 entries, 1557 docs, 0.73 MB
2025-05-06 16:30:32,803 - INFO - PubMedQA Test Split: 2450 entries, 12250 docs, 4.31 MB
2025-05-06 16:30:32,803 - INFO - Combined Dataset: 2840 entries, 13807 docs, 5.04 MB
2025-05-06 16:30:33,916 - INFO - Document Collection Duration: 1.11s
2025-05-06 16:30:33,917 - INFO - Total Documents to Embed: 13807
2025-05-06 16:30:33,917 - INFO - Using sequential embedding mode
2025-05-06 16:32:42,907 - INFO - Sequential Embedding Duration: 128.99s
2025-05-06 16:32:42,907 - INFO - Total Query Preprocessing: 0.00s
2025-05-06 16:32:42,907 - INFO - Total Query Encoding: 126.75s
2025-05-06 16:32:42,911 - INFO - Average Embedding Norm: 1.0000 ± 0.0000
Embedding Generation - Duration: 128.99s, CPU Time Delta: 128.98s, CPU: 0.00%, Memory: 3889.52 MB
2025-05-06 16:32:43,912 - INFO - Attempting to connect to MongoDB at mongodb://localhost:32768/?directConnection=true (Attempt 1/5)
2025-05-06 16:32:43,916 - INFO - Connected to MongoDB successfully!
2025-05-06 16:32:44,037 - INFO - Database Clearing Duration: 0.12s
2025-05-06 16:32:44,037 - INFO - Inserting documents in batch into MongoDB
2025-05-06 16:32:46,034 - INFO - Batch Document Storage Duration: 2.00s
2025-05-06 16:32:46,035 - INFO - Setting up vector index
2025-05-06 16:32:48,412 - INFO - Existing 'vector_index' dropped.
2025-05-06 16:32:48,433 - INFO - Waiting for vector index to be ready...
2025-05-06 16:32:58,849 - INFO - Vector index is now ready!
2025-05-06 16:32:58,849 - INFO - Document Indexing Duration: 12.81s
Embedding and Storage - Duration: 14.94s, CPU Time Delta: 0.95s, CPU: 0.00%, Memory: 3890.52 MB
After Index Setup - CPU: 0.00%, CPU Time: 11582.72s, Memory: 3890.52 MB
2025-05-06 16:33:00,861 - INFO - Stored 13807 documents in batch, 13807 entries in MongoDB.
Data Load (sequential) - Duration: 153.87s, CPU Time Delta: 132.45s, CPU: 0.00%, Memory: 3680.12 MB
2025-05-06 16:33:01,967 - INFO - 
Running evaluation (30 candidates, sequential)...
2025-05-06 16:33:01,968 - INFO - Starting evaluation with 2840 queries, 4 workers, 30 candidates
2025-05-06 16:34:32,083 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 16:34:32,083 - INFO - Database Size: 136.48 MB (13807 documents)
2025-05-06 16:34:32,083 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 16:34:32,083 - INFO - Average Precision: 93.52% (7968/8520 docs)
2025-05-06 16:34:32,083 - INFO - Average Latency: 0.1233 seconds/query
2025-05-06 16:34:32,083 - INFO - Throughput: 31.52 queries/second (with 4 workers, 30 candidates)
Evaluation (30 candidates, sequential) - Duration: 90.12s, CPU Time Delta: 128.33s, CPU: 0.00%, Memory: 3677.21 MB
2025-05-06 16:34:33,091 - INFO - 
Running evaluation (100 candidates, sequential)...
2025-05-06 16:34:33,092 - INFO - Starting evaluation with 2840 queries, 4 workers, 100 candidates
2025-05-06 16:36:02,285 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 16:36:02,285 - INFO - Database Size: 136.48 MB (13807 documents)
2025-05-06 16:36:02,285 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 16:36:02,285 - INFO - Average Precision: 94.67% (8066/8520 docs)
2025-05-06 16:36:02,285 - INFO - Average Latency: 0.1220 seconds/query
2025-05-06 16:36:02,285 - INFO - Throughput: 31.85 queries/second (with 4 workers, 100 candidates)
Evaluation (100 candidates, sequential) - Duration: 89.20s, CPU Time Delta: 126.45s, CPU: 0.00%, Memory: 3676.21 MB
2025-05-06 16:36:03,294 - INFO - Running batch embedding mode
2025-05-06 16:36:03,296 - INFO - Use pytorch device_name: cuda:0
2025-05-06 16:36:03,296 - INFO - Load pretrained SentenceTransformer: BAAI/bge-base-en-v1.5
2025-05-06 16:36:04,777 - INFO - Loading HotpotQA dataset with split: test
2025-05-06 16:36:06,757 - INFO - Loading PubMedQA dataset with split: test
2025-05-06 16:36:08,441 - INFO - Dataset Loading Duration: 3.66s
2025-05-06 16:36:09,484 - INFO - HotpotQA Test Split: 390 entries, 1557 docs, 0.73 MB
2025-05-06 16:36:09,484 - INFO - PubMedQA Test Split: 2450 entries, 12250 docs, 4.31 MB
2025-05-06 16:36:09,484 - INFO - Combined Dataset: 2840 entries, 13807 docs, 5.04 MB
2025-05-06 16:36:10,596 - INFO - Document Collection Duration: 1.11s
2025-05-06 16:36:10,596 - INFO - Total Documents to Embed: 13807
2025-05-06 16:36:10,596 - INFO - Using batch embedding mode
2025-05-06 16:36:52,604 - INFO - Batch Embedding Duration: 42.01s
2025-05-06 16:36:52,604 - INFO - Total Query Preprocessing: 0.00s
2025-05-06 16:36:52,604 - INFO - Total Query Encoding: 20.23s
2025-05-06 16:36:52,606 - INFO - Average Embedding Norm: 1.0000 ± 0.0000
Embedding Generation - Duration: 42.01s, CPU Time Delta: 45.76s, CPU: 0.00%, Memory: 3911.99 MB
2025-05-06 16:36:53,607 - INFO - Attempting to connect to MongoDB at mongodb://localhost:32768/?directConnection=true (Attempt 1/5)
2025-05-06 16:36:53,611 - INFO - Connected to MongoDB successfully!
2025-05-06 16:36:53,732 - INFO - Database Clearing Duration: 0.12s
2025-05-06 16:36:53,732 - INFO - Inserting documents in batch into MongoDB
2025-05-06 16:36:55,536 - INFO - Batch Document Storage Duration: 1.80s
2025-05-06 16:36:55,536 - INFO - Setting up vector index
2025-05-06 16:36:57,667 - INFO - Existing 'vector_index' dropped.
2025-05-06 16:36:57,690 - INFO - Waiting for vector index to be ready...
2025-05-06 16:37:08,102 - INFO - Vector index is now ready!
2025-05-06 16:37:08,102 - INFO - Document Indexing Duration: 12.57s
Embedding and Storage - Duration: 14.49s, CPU Time Delta: 0.96s, CPU: 0.00%, Memory: 3913.28 MB
After Index Setup - CPU: 0.00%, CPU Time: 11886.96s, Memory: 3913.28 MB
2025-05-06 16:37:10,115 - INFO - Stored 13807 documents in batch, 13807 entries in MongoDB.
Data Load (batch) - Duration: 65.45s, CPU Time Delta: 49.24s, CPU: 0.00%, Memory: 3689.20 MB
2025-05-06 16:37:11,225 - INFO - 
Running evaluation (30 candidates, batch)...
2025-05-06 16:37:11,225 - INFO - Starting evaluation with 2840 queries, 4 workers, 30 candidates
2025-05-06 16:38:41,152 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 16:38:41,152 - INFO - Database Size: 136.48 MB (13807 documents)
2025-05-06 16:38:41,152 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 16:38:41,152 - INFO - Average Precision: 93.87% (7998/8520 docs)
2025-05-06 16:38:41,152 - INFO - Average Latency: 0.1230 seconds/query
2025-05-06 16:38:41,152 - INFO - Throughput: 31.59 queries/second (with 4 workers, 30 candidates)
Evaluation (30 candidates, batch) - Duration: 89.93s, CPU Time Delta: 128.11s, CPU: 0.00%, Memory: 3681.22 MB
2025-05-06 16:38:42,162 - INFO - 
Running evaluation (100 candidates, batch)...
2025-05-06 16:38:42,162 - INFO - Starting evaluation with 2840 queries, 4 workers, 100 candidates
2025-05-06 16:40:11,570 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 16:40:11,570 - INFO - Database Size: 136.48 MB (13807 documents)
2025-05-06 16:40:11,570 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 16:40:11,570 - INFO - Average Precision: 94.66% (8065/8520 docs)
2025-05-06 16:40:11,570 - INFO - Average Latency: 0.1222 seconds/query
2025-05-06 16:40:11,570 - INFO - Throughput: 31.77 queries/second (with 4 workers, 100 candidates)
Evaluation (100 candidates, batch) - Duration: 89.42s, CPU Time Delta: 126.31s, CPU: 0.00%, Memory: 3681.22 MB
2025-05-06 16:40:12,580 - INFO - 
=== Summary for Model: BAAI/bge-base-en-v1.5 (Sequential Embedding) ===
2025-05-06 16:40:12,580 - INFO - Model Specs:
2025-05-06 16:40:12,580 - INFO -   Parameters: 110,000,000 (~110M)
2025-05-06 16:40:12,580 - INFO -   Embedding Size: 768
2025-05-06 16:40:12,580 - INFO - 
Dataset and Database Statistics:
2025-05-06 16:40:12,580 - INFO - Metric                                   Value               
2025-05-06 16:40:12,580 - INFO - ------------------------------------------------------------
2025-05-06 16:40:12,580 - INFO - HotpotQA Entries                         390                 
2025-05-06 16:40:12,580 - INFO - PubMedQA Entries                         2450                
2025-05-06 16:40:12,580 - INFO - Total Dataset Entries                    2840                
2025-05-06 16:40:12,580 - INFO - HotpotQA Documents                       1557                
2025-05-06 16:40:12,580 - INFO - PubMedQA Documents                       12250               
2025-05-06 16:40:12,580 - INFO - Total Documents                          13807               
2025-05-06 16:40:12,580 - INFO - HotpotQA Size (MB)                       0.73                
2025-05-06 16:40:12,580 - INFO - PubMedQA Size (MB)                       4.31                
2025-05-06 16:40:12,580 - INFO - Total Dataset Size (MB)                  5.04                
2025-05-06 16:40:12,580 - INFO - Documents Stored (Batch)                 13807               
2025-05-06 16:40:12,580 - INFO - Database Entries                         13807               
2025-05-06 16:40:12,580 - INFO - Database Size (MB)                       136.48              
2025-05-06 16:40:12,580 - INFO - Total Queries Evaluated                  2840                
2025-05-06 16:40:12,580 - INFO - Embedding Mode                           sequential          
2025-05-06 16:40:12,580 - INFO - 
Timing Breakdown (Total Time: 1147.69s):
2025-05-06 16:40:12,580 - INFO - Process                                  Time (s)     Proportion (%) 
2025-05-06 16:40:12,580 - INFO - -------------------------------------------------------------------
2025-05-06 16:40:12,580 - INFO - Database Connection                      0.00         0.00           
2025-05-06 16:40:12,580 - INFO - Dataset Loading                          4.67         0.41           
2025-05-06 16:40:12,580 - INFO - Document Collection                      1.11         0.10           
2025-05-06 16:40:12,581 - INFO - Database Clearing                        0.12         0.01           
2025-05-06 16:40:12,581 - INFO - Sequential Embedding                     128.99       11.24          
2025-05-06 16:40:12,581 - INFO - Embedding Generation (Document)          128.99       11.24          
2025-05-06 16:40:12,581 - INFO - Batch Document Storage                   2.00         0.17           
2025-05-06 16:40:12,581 - INFO - Document Indexing                        12.81        1.12           
2025-05-06 16:40:12,581 - INFO - Query Preprocessing (30 candidates)      0.00         0.00           
2025-05-06 16:40:12,581 - INFO - Query Encoding (30 candidates)           333.99       29.10          
2025-05-06 16:40:12,581 - INFO - Vector Similarity Search (30 candidates) 12.67        1.10           
2025-05-06 16:40:12,581 - INFO - Evaluation Overhead (30 candidates)      90.10        7.85           
2025-05-06 16:40:12,581 - INFO - Query Preprocessing (100 candidates)     0.00         0.00           
2025-05-06 16:40:12,581 - INFO - Query Encoding (100 candidates)          321.32       28.00          
2025-05-06 16:40:12,581 - INFO - Vector Similarity Search (100 candidates) 21.73        1.89           
2025-05-06 16:40:12,581 - INFO - Evaluation Overhead (100 candidates)     89.18        7.77           
2025-05-06 16:40:12,581 - INFO - 
Evaluation Metrics (30 candidates):
2025-05-06 16:40:12,581 - INFO -   Latency (s/query): 0.1233
2025-05-06 16:40:12,581 - INFO -   Throughput (q/s): 31.52
2025-05-06 16:40:12,581 - INFO -   Precision (%): 93.52
2025-05-06 16:40:12,581 - INFO - 
Evaluation Metrics (100 candidates):
2025-05-06 16:40:12,581 - INFO -   Latency (s/query): 0.1220
2025-05-06 16:40:12,581 - INFO -   Throughput (q/s): 31.85
2025-05-06 16:40:12,581 - INFO -   Precision (%): 94.67
2025-05-06 16:40:12,581 - INFO - 
=== Summary for Model: BAAI/bge-base-en-v1.5 (Batch Embedding) ===
2025-05-06 16:40:12,581 - INFO - Model Specs:
2025-05-06 16:40:12,581 - INFO -   Parameters: 110,000,000 (~110M)
2025-05-06 16:40:12,581 - INFO -   Embedding Size: 768
2025-05-06 16:40:12,581 - INFO - 
Dataset and Database Statistics:
2025-05-06 16:40:12,581 - INFO - Metric                                   Value               
2025-05-06 16:40:12,581 - INFO - ------------------------------------------------------------
2025-05-06 16:40:12,581 - INFO - HotpotQA Entries                         390                 
2025-05-06 16:40:12,581 - INFO - PubMedQA Entries                         2450                
2025-05-06 16:40:12,581 - INFO - Total Dataset Entries                    2840                
2025-05-06 16:40:12,581 - INFO - HotpotQA Documents                       1557                
2025-05-06 16:40:12,581 - INFO - PubMedQA Documents                       12250               
2025-05-06 16:40:12,581 - INFO - Total Documents                          13807               
2025-05-06 16:40:12,581 - INFO - HotpotQA Size (MB)                       0.73                
2025-05-06 16:40:12,581 - INFO - PubMedQA Size (MB)                       4.31                
2025-05-06 16:40:12,581 - INFO - Total Dataset Size (MB)                  5.04                
2025-05-06 16:40:12,581 - INFO - Documents Stored (Batch)                 13807               
2025-05-06 16:40:12,581 - INFO - Database Entries                         13807               
2025-05-06 16:40:12,581 - INFO - Database Size (MB)                       136.48              
2025-05-06 16:40:12,581 - INFO - Total Queries Evaluated                  2840                
2025-05-06 16:40:12,581 - INFO - Embedding Mode                           batch               
2025-05-06 16:40:12,581 - INFO - 
Timing Breakdown (Total Time: 972.04s):
2025-05-06 16:40:12,581 - INFO - Process                                  Time (s)     Proportion (%) 
2025-05-06 16:40:12,581 - INFO - -------------------------------------------------------------------
2025-05-06 16:40:12,581 - INFO - Database Connection                      0.00         0.00           
2025-05-06 16:40:12,581 - INFO - Dataset Loading                          3.66         0.38           
2025-05-06 16:40:12,581 - INFO - Document Collection                      1.11         0.11           
2025-05-06 16:40:12,581 - INFO - Database Clearing                        0.12         0.01           
2025-05-06 16:40:12,581 - INFO - Batch Embedding                          42.01        4.32           
2025-05-06 16:40:12,581 - INFO - Embedding Generation (Document)          42.01        4.32           
2025-05-06 16:40:12,581 - INFO - Batch Document Storage                   1.80         0.19           
2025-05-06 16:40:12,581 - INFO - Document Indexing                        12.57        1.29           
2025-05-06 16:40:12,581 - INFO - Query Preprocessing (30 candidates)      0.00         0.00           
2025-05-06 16:40:12,582 - INFO - Query Encoding (30 candidates)           332.41       34.20          
2025-05-06 16:40:12,582 - INFO - Vector Similarity Search (30 candidates) 13.41        1.38           
2025-05-06 16:40:12,582 - INFO - Evaluation Overhead (30 candidates)      89.91        9.25           
2025-05-06 16:40:12,582 - INFO - Query Preprocessing (100 candidates)     0.00         0.00           
2025-05-06 16:40:12,582 - INFO - Query Encoding (100 candidates)          319.01       32.82          
2025-05-06 16:40:12,582 - INFO - Vector Similarity Search (100 candidates) 24.62        2.53           
2025-05-06 16:40:12,582 - INFO - Evaluation Overhead (100 candidates)     89.39        9.20           
2025-05-06 16:40:12,582 - INFO - 
Evaluation Metrics (30 candidates):
2025-05-06 16:40:12,582 - INFO -   Latency (s/query): 0.1230
2025-05-06 16:40:12,582 - INFO -   Throughput (q/s): 31.59
2025-05-06 16:40:12,582 - INFO -   Precision (%): 93.87
2025-05-06 16:40:12,582 - INFO - 
Evaluation Metrics (100 candidates):
2025-05-06 16:40:12,582 - INFO -   Latency (s/query): 0.1222
2025-05-06 16:40:12,582 - INFO -   Throughput (q/s): 31.77
2025-05-06 16:40:12,582 - INFO -   Precision (%): 94.66
2025-05-06 16:40:12,582 - INFO - 
=== Evaluating Model: thenlper/gte-base ===
2025-05-06 16:40:12,582 - INFO - Running sequential embedding mode
2025-05-06 16:40:12,584 - INFO - Use pytorch device_name: cuda:0
2025-05-06 16:40:12,584 - INFO - Load pretrained SentenceTransformer: thenlper/gte-base
2025-05-06 16:40:14,215 - INFO - Loading HotpotQA dataset with split: test
2025-05-06 16:40:15,938 - INFO - Loading PubMedQA dataset with split: test
2025-05-06 16:40:17,762 - INFO - Dataset Loading Duration: 3.55s
2025-05-06 16:40:18,831 - INFO - HotpotQA Test Split: 390 entries, 1557 docs, 0.73 MB
2025-05-06 16:40:18,832 - INFO - PubMedQA Test Split: 2450 entries, 12250 docs, 4.31 MB
2025-05-06 16:40:18,832 - INFO - Combined Dataset: 2840 entries, 13807 docs, 5.04 MB
2025-05-06 16:40:19,969 - INFO - Document Collection Duration: 1.14s
2025-05-06 16:40:19,969 - INFO - Total Documents to Embed: 13807
2025-05-06 16:40:19,969 - INFO - Using sequential embedding mode
2025-05-06 16:42:30,777 - INFO - Sequential Embedding Duration: 130.81s
2025-05-06 16:42:30,777 - INFO - Total Query Preprocessing: 0.00s
2025-05-06 16:42:30,777 - INFO - Total Query Encoding: 128.67s
2025-05-06 16:42:30,781 - INFO - Average Embedding Norm: 1.0000 ± 0.0000
Embedding Generation - Duration: 130.81s, CPU Time Delta: 130.81s, CPU: 0.00%, Memory: 3888.34 MB
2025-05-06 16:42:31,782 - INFO - Attempting to connect to MongoDB at mongodb://localhost:32768/?directConnection=true (Attempt 1/5)
2025-05-06 16:42:31,788 - INFO - Connected to MongoDB successfully!
2025-05-06 16:42:31,911 - INFO - Database Clearing Duration: 0.12s
2025-05-06 16:42:31,911 - INFO - Inserting documents in batch into MongoDB
2025-05-06 16:42:33,990 - INFO - Batch Document Storage Duration: 2.08s
2025-05-06 16:42:33,991 - INFO - Setting up vector index
2025-05-06 16:42:36,038 - INFO - Existing 'vector_index' dropped.
2025-05-06 16:42:36,064 - INFO - Waiting for vector index to be ready...
2025-05-06 16:42:46,483 - INFO - Vector index is now ready!
2025-05-06 16:42:46,483 - INFO - Document Indexing Duration: 12.49s
Embedding and Storage - Duration: 14.70s, CPU Time Delta: 0.97s, CPU: 0.00%, Memory: 3889.63 MB
After Index Setup - CPU: 0.00%, CPU Time: 12276.18s, Memory: 3889.63 MB
2025-05-06 16:42:48,495 - INFO - Stored 13807 documents in batch, 13807 entries in MongoDB.
Data Load (sequential) - Duration: 154.39s, CPU Time Delta: 134.50s, CPU: 0.00%, Memory: 3679.31 MB
2025-05-06 16:42:49,604 - INFO - 
Running evaluation (30 candidates, sequential)...
2025-05-06 16:42:49,604 - INFO - Starting evaluation with 2840 queries, 4 workers, 30 candidates
2025-05-06 16:44:19,406 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 16:44:19,406 - INFO - Database Size: 136.48 MB (13807 documents)
2025-05-06 16:44:19,406 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 16:44:19,406 - INFO - Average Precision: 96.38% (8212/8520 docs)
2025-05-06 16:44:19,406 - INFO - Average Latency: 0.1232 seconds/query
2025-05-06 16:44:19,406 - INFO - Throughput: 31.63 queries/second (with 4 workers, 30 candidates)
Evaluation (30 candidates, sequential) - Duration: 89.81s, CPU Time Delta: 128.83s, CPU: 0.00%, Memory: 3677.39 MB
2025-05-06 16:44:20,415 - INFO - 
Running evaluation (100 candidates, sequential)...
2025-05-06 16:44:20,415 - INFO - Starting evaluation with 2840 queries, 4 workers, 100 candidates
2025-05-06 16:45:49,832 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 16:45:49,832 - INFO - Database Size: 136.48 MB (13807 documents)
2025-05-06 16:45:49,832 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 16:45:49,832 - INFO - Average Precision: 96.47% (8219/8520 docs)
2025-05-06 16:45:49,832 - INFO - Average Latency: 0.1226 seconds/query
2025-05-06 16:45:49,832 - INFO - Throughput: 31.77 queries/second (with 4 workers, 100 candidates)
Evaluation (100 candidates, sequential) - Duration: 89.43s, CPU Time Delta: 127.33s, CPU: 0.00%, Memory: 3677.39 MB
2025-05-06 16:45:50,843 - INFO - Running batch embedding mode
2025-05-06 16:45:50,845 - INFO - Use pytorch device_name: cuda:0
2025-05-06 16:45:50,845 - INFO - Load pretrained SentenceTransformer: thenlper/gte-base
2025-05-06 16:45:52,323 - INFO - Loading HotpotQA dataset with split: test
2025-05-06 16:45:54,084 - INFO - Loading PubMedQA dataset with split: test
2025-05-06 16:45:56,190 - INFO - Dataset Loading Duration: 3.87s
2025-05-06 16:45:57,226 - INFO - HotpotQA Test Split: 390 entries, 1557 docs, 0.73 MB
2025-05-06 16:45:57,226 - INFO - PubMedQA Test Split: 2450 entries, 12250 docs, 4.31 MB
2025-05-06 16:45:57,226 - INFO - Combined Dataset: 2840 entries, 13807 docs, 5.04 MB
2025-05-06 16:45:58,347 - INFO - Document Collection Duration: 1.12s
2025-05-06 16:45:58,347 - INFO - Total Documents to Embed: 13807
2025-05-06 16:45:58,347 - INFO - Using batch embedding mode
2025-05-06 16:46:40,360 - INFO - Batch Embedding Duration: 42.01s
2025-05-06 16:46:40,360 - INFO - Total Query Preprocessing: 0.00s
2025-05-06 16:46:40,360 - INFO - Total Query Encoding: 20.28s
2025-05-06 16:46:40,362 - INFO - Average Embedding Norm: 1.0000 ± 0.0000
Embedding Generation - Duration: 42.01s, CPU Time Delta: 45.75s, CPU: 0.00%, Memory: 3911.23 MB
2025-05-06 16:46:41,363 - INFO - Attempting to connect to MongoDB at mongodb://localhost:32768/?directConnection=true (Attempt 1/5)
2025-05-06 16:46:41,367 - INFO - Connected to MongoDB successfully!
2025-05-06 16:46:41,489 - INFO - Database Clearing Duration: 0.12s
2025-05-06 16:46:41,489 - INFO - Inserting documents in batch into MongoDB
2025-05-06 16:46:43,536 - INFO - Batch Document Storage Duration: 2.05s
2025-05-06 16:46:43,536 - INFO - Setting up vector index
2025-05-06 16:46:45,409 - INFO - Existing 'vector_index' dropped.
2025-05-06 16:46:45,431 - INFO - Waiting for vector index to be ready...
2025-05-06 16:46:55,848 - INFO - Vector index is now ready!
2025-05-06 16:46:55,848 - INFO - Document Indexing Duration: 12.31s
Embedding and Storage - Duration: 14.49s, CPU Time Delta: 0.95s, CPU: 0.00%, Memory: 3912.55 MB
After Index Setup - CPU: 0.00%, CPU Time: 12581.84s, Memory: 3912.55 MB
2025-05-06 16:46:57,862 - INFO - Stored 13807 documents in batch, 13807 entries in MongoDB.
Data Load (batch) - Duration: 65.65s, CPU Time Delta: 49.23s, CPU: 0.00%, Memory: 3687.44 MB
2025-05-06 16:46:58,976 - INFO - 
Running evaluation (30 candidates, batch)...
2025-05-06 16:46:58,976 - INFO - Starting evaluation with 2840 queries, 4 workers, 30 candidates
2025-05-06 16:48:29,123 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 16:48:29,123 - INFO - Database Size: 136.48 MB (13807 documents)
2025-05-06 16:48:29,123 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 16:48:29,123 - INFO - Average Precision: 96.48% (8220/8520 docs)
2025-05-06 16:48:29,123 - INFO - Average Latency: 0.1237 seconds/query
2025-05-06 16:48:29,123 - INFO - Throughput: 31.51 queries/second (with 4 workers, 30 candidates)
Evaluation (30 candidates, batch) - Duration: 90.15s, CPU Time Delta: 129.25s, CPU: 1.00%, Memory: 3683.46 MB
2025-05-06 16:48:30,132 - INFO - 
Running evaluation (100 candidates, batch)...
2025-05-06 16:48:30,132 - INFO - Starting evaluation with 2840 queries, 4 workers, 100 candidates
2025-05-06 16:49:59,485 - INFO - 
=== Retrieval Performance Summary ===
2025-05-06 16:49:59,485 - INFO - Database Size: 136.48 MB (13807 documents)
2025-05-06 16:49:59,485 - INFO - Retrieval Success: 100.00% (2840/2840 queries)
2025-05-06 16:49:59,485 - INFO - Average Precision: 96.48% (8220/8520 docs)
2025-05-06 16:49:59,485 - INFO - Average Latency: 0.1225 seconds/query
2025-05-06 16:49:59,485 - INFO - Throughput: 31.79 queries/second (with 4 workers, 100 candidates)
Evaluation (100 candidates, batch) - Duration: 89.36s, CPU Time Delta: 127.08s, CPU: 0.00%, Memory: 3683.46 MB
2025-05-06 16:50:00,496 - INFO - 
=== Summary for Model: thenlper/gte-base (Sequential Embedding) ===
2025-05-06 16:50:00,496 - INFO - Model Specs:
2025-05-06 16:50:00,496 - INFO -   Parameters: 110,000,000 (~110M)
2025-05-06 16:50:00,496 - INFO -   Embedding Size: 768
2025-05-06 16:50:00,496 - INFO - 
Dataset and Database Statistics:
2025-05-06 16:50:00,496 - INFO - Metric                                   Value               
2025-05-06 16:50:00,496 - INFO - ------------------------------------------------------------
2025-05-06 16:50:00,496 - INFO - HotpotQA Entries                         390                 
2025-05-06 16:50:00,496 - INFO - PubMedQA Entries                         2450                
2025-05-06 16:50:00,496 - INFO - Total Dataset Entries                    2840                
2025-05-06 16:50:00,496 - INFO - HotpotQA Documents                       1557                
2025-05-06 16:50:00,496 - INFO - PubMedQA Documents                       12250               
2025-05-06 16:50:00,496 - INFO - Total Documents                          13807               
2025-05-06 16:50:00,496 - INFO - HotpotQA Size (MB)                       0.73                
2025-05-06 16:50:00,496 - INFO - PubMedQA Size (MB)                       4.31                
2025-05-06 16:50:00,496 - INFO - Total Dataset Size (MB)                  5.04                
2025-05-06 16:50:00,496 - INFO - Documents Stored (Batch)                 13807               
2025-05-06 16:50:00,496 - INFO - Database Entries                         13807               
2025-05-06 16:50:00,496 - INFO - Database Size (MB)                       136.48              
2025-05-06 16:50:00,496 - INFO - Total Queries Evaluated                  2840                
2025-05-06 16:50:00,496 - INFO - Embedding Mode                           sequential          
2025-05-06 16:50:00,496 - INFO - 
Timing Breakdown (Total Time: 1151.16s):
2025-05-06 16:50:00,496 - INFO - Process                                  Time (s)     Proportion (%) 
2025-05-06 16:50:00,496 - INFO - -------------------------------------------------------------------
2025-05-06 16:50:00,496 - INFO - Database Connection                      0.01         0.00           
2025-05-06 16:50:00,496 - INFO - Dataset Loading                          3.55         0.31           
2025-05-06 16:50:00,496 - INFO - Document Collection                      1.14         0.10           
2025-05-06 16:50:00,496 - INFO - Database Clearing                        0.12         0.01           
2025-05-06 16:50:00,496 - INFO - Sequential Embedding                     130.81       11.36          
2025-05-06 16:50:00,496 - INFO - Embedding Generation (Document)          130.81       11.36          
2025-05-06 16:50:00,496 - INFO - Batch Document Storage                   2.08         0.18           
2025-05-06 16:50:00,496 - INFO - Document Indexing                        12.49        1.09           
2025-05-06 16:50:00,496 - INFO - Query Preprocessing (30 candidates)      0.00         0.00           
2025-05-06 16:50:00,496 - INFO - Query Encoding (30 candidates)           333.96       29.01          
2025-05-06 16:50:00,496 - INFO - Vector Similarity Search (30 candidates) 12.51        1.09           
2025-05-06 16:50:00,496 - INFO - Evaluation Overhead (30 candidates)      89.79        7.80           
2025-05-06 16:50:00,496 - INFO - Query Preprocessing (100 candidates)     0.00         0.00           
2025-05-06 16:50:00,496 - INFO - Query Encoding (100 candidates)          323.22       28.08          
2025-05-06 16:50:00,496 - INFO - Vector Similarity Search (100 candidates) 21.29        1.85           
2025-05-06 16:50:00,496 - INFO - Evaluation Overhead (100 candidates)     89.40        7.77           
2025-05-06 16:50:00,496 - INFO - 
Evaluation Metrics (30 candidates):
2025-05-06 16:50:00,496 - INFO -   Latency (s/query): 0.1232
2025-05-06 16:50:00,496 - INFO -   Throughput (q/s): 31.63
2025-05-06 16:50:00,497 - INFO -   Precision (%): 96.38
2025-05-06 16:50:00,497 - INFO - 
Evaluation Metrics (100 candidates):
2025-05-06 16:50:00,497 - INFO -   Latency (s/query): 0.1226
2025-05-06 16:50:00,497 - INFO -   Throughput (q/s): 31.77
2025-05-06 16:50:00,497 - INFO -   Precision (%): 96.47
2025-05-06 16:50:00,497 - INFO - 
=== Summary for Model: thenlper/gte-base (Batch Embedding) ===
2025-05-06 16:50:00,497 - INFO - Model Specs:
2025-05-06 16:50:00,497 - INFO -   Parameters: 110,000,000 (~110M)
2025-05-06 16:50:00,497 - INFO -   Embedding Size: 768
2025-05-06 16:50:00,497 - INFO - 
Dataset and Database Statistics:
2025-05-06 16:50:00,497 - INFO - Metric                                   Value               
2025-05-06 16:50:00,497 - INFO - ------------------------------------------------------------
2025-05-06 16:50:00,497 - INFO - HotpotQA Entries                         390                 
2025-05-06 16:50:00,497 - INFO - PubMedQA Entries                         2450                
2025-05-06 16:50:00,497 - INFO - Total Dataset Entries                    2840                
2025-05-06 16:50:00,497 - INFO - HotpotQA Documents                       1557                
2025-05-06 16:50:00,497 - INFO - PubMedQA Documents                       12250               
2025-05-06 16:50:00,497 - INFO - Total Documents                          13807               
2025-05-06 16:50:00,497 - INFO - HotpotQA Size (MB)                       0.73                
2025-05-06 16:50:00,497 - INFO - PubMedQA Size (MB)                       4.31                
2025-05-06 16:50:00,497 - INFO - Total Dataset Size (MB)                  5.04                
2025-05-06 16:50:00,497 - INFO - Documents Stored (Batch)                 13807               
2025-05-06 16:50:00,497 - INFO - Database Entries                         13807               
2025-05-06 16:50:00,497 - INFO - Database Size (MB)                       136.48              
2025-05-06 16:50:00,497 - INFO - Total Queries Evaluated                  2840                
2025-05-06 16:50:00,497 - INFO - Embedding Mode                           batch               
2025-05-06 16:50:00,497 - INFO - 
Timing Breakdown (Total Time: 975.18s):
2025-05-06 16:50:00,497 - INFO - Process                                  Time (s)     Proportion (%) 
2025-05-06 16:50:00,497 - INFO - -------------------------------------------------------------------
2025-05-06 16:50:00,497 - INFO - Database Connection                      0.00         0.00           
2025-05-06 16:50:00,497 - INFO - Dataset Loading                          3.87         0.40           
2025-05-06 16:50:00,497 - INFO - Document Collection                      1.12         0.11           
2025-05-06 16:50:00,497 - INFO - Database Clearing                        0.12         0.01           
2025-05-06 16:50:00,497 - INFO - Batch Embedding                          42.01        4.31           
2025-05-06 16:50:00,497 - INFO - Embedding Generation (Document)          42.01        4.31           
2025-05-06 16:50:00,497 - INFO - Batch Document Storage                   2.05         0.21           
2025-05-06 16:50:00,497 - INFO - Document Indexing                        12.31        1.26           
2025-05-06 16:50:00,497 - INFO - Query Preprocessing (30 candidates)      0.00         0.00           
2025-05-06 16:50:00,497 - INFO - Query Encoding (30 candidates)           334.76       34.33          
2025-05-06 16:50:00,497 - INFO - Vector Similarity Search (30 candidates) 13.03        1.34           
2025-05-06 16:50:00,497 - INFO - Evaluation Overhead (30 candidates)      90.13        9.24           
2025-05-06 16:50:00,497 - INFO - Query Preprocessing (100 candidates)     0.00         0.00           
2025-05-06 16:50:00,497 - INFO - Query Encoding (100 candidates)          323.24       33.15          
2025-05-06 16:50:00,497 - INFO - Vector Similarity Search (100 candidates) 21.19        2.17           
2025-05-06 16:50:00,497 - INFO - Evaluation Overhead (100 candidates)     89.34        9.16           
2025-05-06 16:50:00,497 - INFO - 
Evaluation Metrics (30 candidates):
2025-05-06 16:50:00,497 - INFO -   Latency (s/query): 0.1237
2025-05-06 16:50:00,497 - INFO -   Throughput (q/s): 31.51
2025-05-06 16:50:00,497 - INFO -   Precision (%): 96.48
2025-05-06 16:50:00,497 - INFO - 
Evaluation Metrics (100 candidates):
2025-05-06 16:50:00,497 - INFO -   Latency (s/query): 0.1225
2025-05-06 16:50:00,497 - INFO -   Throughput (q/s): 31.79
2025-05-06 16:50:00,497 - INFO -   Precision (%): 96.48
